<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">
<title>Notes on the Troubleshooting and Repair of Small Switchmode Power
 Supplies</title>
</head>
<body>
<center>
<pre>
</pre>
<h1>
Notes on the Troubleshooting and Repair of<br>
Small Switchmode Power Supplies
</h1>
<h2>
Version 2.86 (28-Jan-14)<br>
</h2>
<h3>
<a href="http://www.repairfaq.org/sam/copyright.htm">Copyright ©</a><a> 1994-2014
<br>
Samuel M. Goldwasser
<br>
--- All Rights Reserved ---
<br>
<br>
For contact info, please see the
</a><a href="http://www.repairfaq.org/sam/emaillnk.htm">Sci.Electronics.Repair FAQ
Email Links Page</a>.
<br>
</h3></center>
<br>
Reproduction of this document in whole or in part is permitted
if both of the following conditions are satisfied:
<ol>
<li>This notice is included in its entirety at the beginning.
<br>
</li><li>There is no charge except to cover the costs of copying.
</li></ol>

<a name="smpstoc"></a>
<hr>
<br>
<h2>Table of Contents</h2>
<ul>

<li><a href="#smpspre">Preface</a>
 <ul>
 <li><a href="#smpsaac">Author and Copyright</a>
 </li><li><a href="#micdis">DISCLAIMER</a> 
 </li></ul>
<p>
</p></li><li><a href="#smpsint">Introduction</a>
 <ul>
 <li><a href="#smpstsps">The switchmode power supply (SMPS)</a>
 </li><li><a href="#smpsspsr">Switchmode power supply repair</a>
 </li><li><a href="#smpsmcp">Most Common Problems</a>
 </li><li><a href="#smpsror">Repair or replace</a>
 </li><li><a href="#smpsreli">Related Information</a>
 </li><li><a href="#smpssps">Switchmode Power Supplies</a>
 </li><li><a href="#smpspsf">Power Supply Fundamentals</a>
 </li><li><a href="#smpslpss">Linear power supplies (LPSs)</a>
 </li><li><a href="#smpswsmps">What is a switchmode power supply?</a>
 </li><li><a href="#smpsdtfts">Description of typical flyback type SMPS</a>
 </li><li><a href="#smpsascl">Advantages of SMPSs compared to LPSs</a>
 </li><li><a href="#smpswasu">Where are SMPSs used?</a>
 </li></ul>
<p>
</p></li><li><a href="#smpsspt">Switchmode Power Supply Troubleshooting</a>
 <ul>
 <li><a href="#smpssaf">SAFETY</a>
 </li><li><a href="#smpstips">Tips on SMPS troubleshooting</a>
 </li><li><a href="#smpstste">Test equipment</a>
 </li><li><a href="#smpsihw">Incredibly handy widgets</a>
 </li><li><a href="#smpssafdc">Safe discharging of capacitors in switchmode power supplies</a>
 </li><li><a href="#smpscapdt">Capacitor discharge tool</a> 
 </li><li><a href="#smpscapdi">Capacitor discharge indicator circuit</a>
 </li><li><a href="#smpsvoltc">Voltage checkers</a>
 </li><li><a href="#smpstslbt">The series light bulb trick</a>
 </li><li><a href="#smpswastm">What about SMPSs in TVs and monitors?</a>
 </li><li><a href="#smpscoscdt">Comments on SMPS capacitor discharging and testing with series loads</a>
 </li><li><a href="#smpssfmod">SMPS failure modes</a>
 </li><li><a href="#smpsstsm">Sounds that SMPSs make</a>
 </li><li><a href="#smpsgensta">General SMPS troubleshooting approach</a>
 </li><li><a href="#smpstsudc">Troubleshooting SMPSs using discrete controllers</a>
 </li><li><a href="#smpstsuic">Troubleshooting SMPSs using integrated controllers</a>
 </li><li><a href="#smpsiprt">Initial post-repair testing</a>
 </li><li><a href="#smpssgspsr">Some general switchmode power supply repair comments</a>
 </li><li><a href="#smpsppcp">Periodic power cycling problems</a>
 </li><li><a href="#smpstswsd">Testing a SMPS without startup drive</a>
 </li></ul>
<p>
</p></li><li><a href="#smpscfs">Components Found in Switchmode Power Supplies</a>
 <ul>
 <li><a href="#smpscus">Common, unusual, and strange</a>
 </li><li><a href="#smpssctos">Switchmode (chopper) transistors and other semiconductors</a>
 </li><li><a href="#smpscfbyp">Capacitors (filter and bypass)</a>
 </li><li><a href="#smpsrnfntm">Resistors (normal and flameproof), NTC thermistors, MOVs</a>
 </li><li><a href="#smpstrnin">Transformers and inductors</a>
 </li><li><a href="#smpsfans">Fans</a>
 </li></ul>
<p>
</p></li><li><a href="#smpsioi">Items of Interest</a>
 <ul>
 <li><a href="#smpspvcr">Panasonic VCR SMPS</a>
 </li><li><a href="#smpstcofss">Typical controller ICs found in small switchmode power supplies</a>
 </li><li><a href="#smpsuc3840">Unitrode UC3840 programmable off-line PWM controller</a>
 </li><li><a href="#smpsuc3842">Unitrode UC3842 off-line PWM controller</a>
 </li><li><a href="#smpsuc3842d">Description of UC3842 startup operation and cycling problems</a>
 </li><li><a href="#smpssb12i">Switching between 115 VAC and 230 VAC input</a>
 </li><li><a href="#smpscivsp">Changing the input voltage of a switchmode power supply</a>
 </li><li><a href="#smpssmovp">Slightly modifying the output voltage of a PC power supply</a>
 </li><li><a href="#smpsusslf">Use of surge suppressors and line filters</a>
 </li><li><a href="#smpsgfci">GFCI tripping with monitor (or other high tech equipment)</a>
 </li><li><a href="#smpswdpssf">Why do power supplies seem to fail after a power outage?</a>
 </li><li><a href="#smpsbuzz">Buzzing or other sounds from SMPSs</a>
 </li><li><a href="#smpscoole">Cool electrolytics - temperature rating versus ESR</a>
 </li><li><a href="#smpswbmw">When better may be worse</a>
 </li><li><a href="#smpsastt">Alan's SMPS troubleshooting technique</a>
 </li><li><a href="#smpsjnsr">John's notes on SMPS repair</a>
 </li><li><a href="#smpsrcsr">Russell's comments on SMPS repair</a>
 </li><li><a href="#smpsbdhtp">Bob's description of how a typical PC power supply works</a>
 </li><li><a href="#smpsscpps">Steve's comments on PC power supply operation and repair</a>
 </li><li><a href="#smpspcpsi">PC power supply information (pinouts, testing and non-standard uses)</a>
 </li><li><a href="#smpssafpc">Safe PC power supply loading</a>
 </li><li><a href="#smpstpcax">Typical PC and ATX power supply schematic</a>
 </li><li><a href="#smpsnatx">Notes on ATX power supply testing</a>
 </li><li><a href="#smpsppfd">Detailed Procedure for ATX Power Supply Fault Diagnosis</a>
 </li><li><a href="#smpswars">War stories - the Boschert 2-stage SMPSU</a>
 </li><li><a href="#smpscslvt">Capacitors, startup, and low voltage testing</a>
 </li><li><a href="#smpswfsb">Why is the main fuse rating so big?</a>
 </li></ul>
<p>
</p></li><li><a href="#smpssrv">Service Information</a>
 <ul>
 <li><a href="#smpsadvt">Advanced troubleshooting</a>
 </li><li><a href="#smpssidol">SMPS info and datasheets on-line</a>
 </li><li><a href="#smpsrefst">References on SMPS technology and troubleshooting</a>
 </li><li><a href="#smpsparts">Parts information</a>
 </li><li><a href="#smpsisoti">Information sources on the Internet</a>
 </li><li><a href="#smpsitcgoc">Interchangeability of components</a>
 </li><li><a href="#smpsreppt">Replacement power transistors while testing</a>
 </li><li><a href="#smpstorct">Testing of replacement chopper transistors</a>
 </li><li><a href="#smpsreppsrc">Repair parts sources</a>
 </li></ul>
</li></ul>
<p>
<a name="smpspre"></a>
</p><hr>
<br>
<li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>. 
<h2>Preface</h2>
<h3><a name="smpsaac">Author and Copyright</a></h3>
<p>
Author: Samuel M. Goldwasser
</p><p>
For contact info, please see the
<a href="http://www.repairfaq.org/sam/emaillnk.htm">Sci.Electronics.Repair FAQ
Email Links Page</a>.
</p><p>
<a href="http://www.repairfaq.org/sam/copyright.htm">Copyright ©</a><a> 1994-2014
<br>
All Rights Reserved
</a></p><p><a>
Reproduction of this document in whole or in part is permitted if both of the
following conditions are satisfied:
</a></p><p><a>
1. This notice is included in its entirety at the beginning. 
<br>
2. There is no charge except to cover the costs of copying. 

</a></p><h3><a name="micdis">DISCLAIMER</a></h3> 

Careless troubleshooting of a line powered switchmode power supply can
result in severe electrical shock or electrocution.  This is potentially
more lethal than the high voltage section of a TV or monitor due to the
high current availability.  Even the charged on the main filter capacitors
with the unit unplugged can kill.
<p>
We will not be responsible for damage to equipment, your ego, county wide
power outages, spontaneously generated mini (or larger) black holes, planetary
disruptions, or personal injury or worse that may result from the use of this
material.
</p><p>
<a name="smpsint"></a>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<h2>Introduction</h2>
<h3><a name="smpstsps">The switchmode power supply (SMPS)</a></h3>

Until the 1970s or so, most consumer electronic equipment used a basic
power transformer/rectifier/filter capacitor type of power supply for
converting the AC line into the various voltages needed by internal
circuitry.  Even regulation was present only where absolutely needed -
the high voltage supplies of color TV sets, for example.  Remember those
old TVs with boat anchor type power transformers?  (Of course, if you
recall those, you also recall the fond days of vacuum tube sets and the
corner drugstore with a public tube tester!)
<p>
Switchmode supplies had been commonplace in military and avionic
equipment long before they found their way into consumer electronics.
I have some DC-DC and DC-AC converter modules from a Minuteman I missile
from around 1962 as one example.  I suppose that the cost of the switching
transistors wasn't as big a deal with a $100 million missile as a $300 TV
(even in 1960s dollars).
</p><p>
Nowadays, all TVs, monitors, PCs; most laptop and camcorder power packs;
many printers, fax machines, and VCRs; and even certain audio equipment
like portable CD players use this technology to reduce cost, weight, and
size.

</p><h3><a name="smpsspsr">Switchmode power supply repair</a></h3>

Unlike PC system boards where any disasters are likely to only affect
your pocketbook, power supplies, especially line connected switchmode
power supplies (SMPSs) can be dangerous.  Read, understand, and
follow the set of safety guidelines provided later in this document
whenever working on line connected power supplies as well as TVs,
monitors, or other similar high voltage equipment.
<p>
Having said that, repairing a power supply yourself may in fact be the
only economical option.  It is very common for service centers to simply
replace the entire power supply board or module even if the problem is a
25 cent capacitor.  It may simply not pay for them to take the bench time
to diagnose down to the component level.  Many problems with switchmode
power supplies are easy to find and easy and inexpensive to fix.  Not
all, but surprisingly many.
</p><p>
This document will provide you with the knowledge to deal with a large
percentage of the problems you are likely to encounter with the common
small switchmode power supplies found in many types of consumer electronic
equipment including PCs, printers, TVs, computer monitors, and laptop or
camcorder power packs.  It will enable you to diagnose problems and
in many cases, correct them as well.  With minor exceptions, specific
manufacturers and models will not be covered as there are so many
variations that such a treatment would require a huge and very detailed
text.  Rather, the most common problems will be addressed and enough
basic principles of operation will be provided to enable you to narrow
the problem down and likely determine a course of action for repair.
In many cases, you will be able to do what is required for a fraction
of the cost that would be charged by a repair center - assuming they would
even bother.
</p><p>
Should you still not be able to find a solution, you will have learned a great
deal and be able to ask appropriate questions and supply relevant information
if you decide to post to sci.electronics.repair.  It will also be easier to do
further research using a repair text such as the ones listed at the end of
this document.  In any case, you will have the satisfaction of knowing you
did as much as you could before taking it in for professional repair.
With your new-found knowledge, you will have the upper hand and will not
easily be snowed by a dishonest or incompetent technician.

</p><h3><a name="smpsmcp">Most Common Problems</a></h3>

The following probably account for 95% or more of the common SMPS ailments:
<p>
</p><ul>
<li>Supply dead, fuse blown - shorted switchmode power transistor and other
 semiconductors, open fusable resistors, other bad parts.  Note: actual
 cause of failure may be power surge/brownout/lightning strikes, random
 failure, or primary side electrolytic capacitor(s) with greatly reduced
 capacity or entirely open - test them before powering up the repaired
 unit.
<p>
</p></li><li>Supply dead, fuse not blown - bad startup circuit (open startup resistors),
 open fusable resistors (due to shorted semiconductors), bad controller
 components.
<p>
</p></li><li>Supply mostly dead or takes a long time to come alive.  There may be an
 LED flashing but the equipment doesn't respond to power button (or takes
 awhile) - bad electrolytic capacitors.  Visually inspect for capacitors
 with bulging tops or that have leaked. If an ESR meter is available, test
 the caps.  If any bad ones are found, replace *all* electrolytic capacitors
 (or at least all caps from the same manufacturer).  Capacitor kits are
 available for many flat screen TVs, computer displays, and other consumer
 electronics.  Search by model (including on eBay).
<p>
</p></li><li>One or more outputs out of tolerance or with excessive ripple at the line
 frequency (50/60 Hz) or twice the line frequency (100/120 Hz) - dried up
 main filter capacitor(s) on rectified AC input.
<p>
</p></li><li>One or more outputs out of tolerance or with excessive ripple at the
 switching frequency (10s of kHz typical) - dried up or leaky filter
 capacitors on affected outputs.
<p>
</p></li><li>Audible whine with low voltage on one or more outputs - shorted
 semiconductors, faulty regulator circuitry resulting in overvoltage
 crowbar kicking in, faulty overvoltage sensing circuit or SCR,
 faulty controller.
<p>
</p></li><li>Periodic power cycling, tweet-tweet, flub-flub, blinking power light -
 shorted semiconductors, faulty over voltage or over current sensing
 components, bad controller.
</li></ul>
<p>
In all cases, bad solder connections are a possibility as well since there
are usually large components in these supplies and soldering to their pins
may not always be perfect.  An excessive load can also result in most of
these symptoms or may be the original cause of the failure.  And don't
overlook the trivial: a line voltage select switch in the wrong position
or between positions (possibly by accident when moving the supply,
particularly with PCs), or damaged.

</p><h3><a name="smpsror">Repair or replace</a></h3>

Some manufacturers have inexpensive flat rate service policies for power
supplies.  If you are not inclined or not interested in doing the diagnosis
and repair yourself, it may be worthwhile to look into these.  In some cases,
$25 will get you a replacement supply regardless of original condition.
However, this is probably the exception and replacements could run more than
the total original cost of the equipment - especially as in the case of most
TVs and many computer monitors, where the power supply is built onto the main 
circuit board.
<p>
Nothing really degrades in a switchmode power supply except possibly the
electrolytic capacitors (unless a catastrophic failure resulted in a total
meltdown) and these can usually be replaced for a total cost of a few dollars.
Therefore, it usually makes sense to repair a faulty supply assuming it can be
done reasonably quickly (depending on how much you value your time and the down
time of the equipment) and, of course, assuming that the equipment it powers
is worth the effort.  Most replacement parts are readily available and kits
containing common service components are also available for many popular
power supplies (such as those found in some terminals, MacIntosh and other
Apple computers, various brands of video monitors, and some TVs and VCRs).
</p><p>
Where an exact replacement power supply is no longer available or excessively
expensive, it may be possible to simply replace the guts if space allows and
the mounting arrangement is compatible.  For example, for an older full size
PC tower, the original power supply may be in a non-standard box but the
circuit board itself may use a standard hole configuration such that an
inexpensive replacement may be installed in its place.
</p><p>
Alternatively, many surplus electronics distributors have a wide selection
of power supplies of all shapes, sizes, output voltages, and current
capacities.  One of these may make a suitable replacement for your custom
supply with a lot less hassle than attempting to repair your undocumented
original.  It will likely be much newer as well with no end-of-life issues
like dried up electrolytic capacitors to deal worry about.  Of course, you
must know the voltage and current maximum current requirements of each of
the outputs in order to make a selection. 
</p><p>
For the specific case of SMPSs for standard computers (PC, Macs, workstations,
servers), it often doesn't make sense to spend much time or money on repair.
The cost of replacement of power supplies for PCs in particular is so low,
that just buying a new power supply may be the best course of action.
Furthermore, the risk of a faulty repair causing expensive or fatal
damage to the mainboard and peripherals including total loss of all
data stored on disk, makes repair a risky endeavor unless thorough testing
can be performed before installation.  However, it won't hurt to check for
obvious problems like bad connections.  Put the dead one aside and considering
trying to repair it if there isn't anything better to do.  Realistically,
this will be never. :)

</p><h3><a name="smpsreli">Related Information</a></h3>

See the manuals on "Failure Diagnosis and Repair of TVs" and "Failure
Diagnosis and Repair of Computer and Video Monitors" for problems specific
to that type of equipment.  For computer power supplies and other general
info, also see: "PC Switchmode Power Supplies".  These are all available
at this site under the Repair Menu.
<p>
<a href="http://www.smps.us/">Lazar's SMPS Design Corner</a> has many links
to switchmode power supply information and suppliers.
</p><p>
<a name="smpssps"></a>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<h2>Switchmode Power Supplies</h2>
<h3><a name="smpspsf">Power Supply Fundamentals</a></h3>

A typical line connected power supply must perform the following functions:
<p>
</p><ul>
<li>Voltage conversion - changing the 115/230 VAC line voltage into one
 or more other voltages as determined by application.
<p>
</p></li><li>Rectification - turning the AC into DC.
<p>
</p></li><li>Filtering - smoothing the ripple of the rectified voltage(s).
<p>
</p></li><li>Regulation - making the output voltage(s) independent of line
 and load variations.
<p>
</p></li><li>Isolation - separating the supply outputs from any direct connection to
 the AC line.
</li></ul>

<h3><a name="smpslpss">Linear power supplies (LPSs)</a></h3>

A typical linear power supply of the type found in most audio equipment
includes a line power transformer which converts the 115/230 VAC 50/60 Hz
to other (usually lower) voltages (now that most equipment has done away
with vacuum tubes except for CRTs, more on that later).  The power
transformer also provides the isolation between the load and the line.
The outputs are rectified by a diode bridge or other solid state
configuration.   Filtering is accomplished with electrolytic capacitors
and sometimes inductors or resistors arranged as a low pass filter C-L-C
(pi) or C-R-C or other configuration.
<p>
Where regulation is important - that is, it is desirable for the
output voltage to be relatively independent of line or load variations,
a regulator stage is added.  This may take the form of a Zener diode if
the current requirements are modest, discrete transistor circuit, or an
integrated 3 terminal regulator like an LM317 (variable), 7805 (+5), or
7912 (-12).  There are many more as well as linear regulators for higher
voltages such as +115 VDC or +125 VDC for TV power supplies and multiple
output (e.g., +5.1 VDC, +12 VDC) hybrid regulators for VCRs.
</p><p>
The regulator circuit essentially compares the output (possibly only
one if there are multiple outputs in the same package) with a reference
and adjusts the current flow to make the output(s) as nearly equal to the
desired voltage as possible.  However, a significant amount of power may
be lost in the regulator especially under high line voltage/high load
conditions.  Therefore, the efficiency of linear power supplies is
usually quite low - under 50% overall is typical.
</p><p>
Notable characteristics of LPSs are excellent regulation and low output
ripple and noise.

</p><h3><a name="smpswsmps">What is a switchmode power supply?</a></h3>

Also called switching power supplies and sometimes chopper controlled
power supplies, SMPSs use high frequency (relative to 50/60 Hz) switching
devices such as Bipolar Junction Transistors (BJTs), MOSFETs, Insulated
Gate Bipolar Transistors (IGBTs), or Thyristors (SCRs or triacs) to take
directly rectified line voltage and convert it to a pulsed waveform.
<p>
Most small SMPSs use BJTs or MOSFETs.  IGBTs may be found in large systems
and SCRs or triacs are used where their advantages (latching in the on
state and high power capability) outweigh the increased complexity of
the circuitry to assure that they turn off properly (since except for
special Gate Turn Off (GTO) thyristors, the gate input is pretty much
ignored once the device is triggered and the current must go to zero
to reset it to the off state.)
</p><p>
The input to the switches is usually either 150-160 VDC after rectification
of 115 VAC, or 300-320 VDC after doubling of 115 VAC or rectification of
220-240 VAC.  Up to this point, there is no line isolation as there is no
line connected (large, bulky, heavy) power transformer.
</p><p>
A relatively small high frequency transformer converts the pulsed
waveform into one or more output voltages which are then rectified and
filtered using electrolytic capacitors and small inductors in a 'pi'
configuration C-L-C, or for outputs that are less critical, just a
capacitor.
</p><p>
This high frequency transformer provides the isolation barrier and the
conversion to generate the multiple voltages often provided by a SMPS.
</p><p>
Feedback is accomplished across the isolation barrier by either a small
pulse transformer or opto-isolator.  The feedback controls the pulse
width or pulse frequency of the switching devices to maintain the
output constant.  Since the feedback is usually only from the "primary"
output, regulation of the other outputs, if any, is usually worse than
for the primary output.  Also, because of the nature of the switching
designs, the regulation even of the primary output is usually not nearly
as good both statically and dynamically as a decent linear supply.
</p><p>
DC-DC converters are switchmode power supplies without the line input
rectification and filtering.  They are commonly found in battery operated
equipment like CD players and laptop computers.  They have similar
advantages to SMPSs in being compact, light weight, and highly efficient.

</p><h3><a name="smpsdtfts">Description of typical flyback type SMPS</a></h3>

Probably the most common topology for small switchers is the flyback circuit
shown below and in <a href="http://www.repairfaq.org/sam/smpsbd.gif">Block Diagram of Basic Flyback
Switchmode Power Supply</a>.
<pre>
           CR1                             CR2        L :::::
 H o-------|&gt;|---+----+---------+ T1 +-----|&gt;|------+---^^^^^---+---+----o V+
          line   |    |          )||(     Main    +_|_        +_|_  |     Main
          rect.  |    /          )||(    output  C ___ LC Pi C ___  |    Output
                 |    \ R1       )||(     rect.   - |  filter - |   |
  AC       HV  +_|_   /       +-+    +--------------+-----------+---|----o V-
 Line    filter ___   \       |                                     |
  in       cap - |    |     |/       +-------+   +-----------+   +-----+
                 |    +-----+--------|  PWM  |&lt;--| Isolation |&lt;--| REF |
                 |       Q1 |\       +-------+   +-----------+   +-----+
                 |            | 
 N o-------------+------------+

</pre>
The input to the supply is the AC line which may have RFI and surge protection
(not shown).  There may be several inductors, coupled inductors, and capacitors
to filter line noise and spikes as well as to minimize the transmission of
switching generated radio frequency interference back into the power line.
There may be MOV type of surge suppressors across the three input leads (H,
N, G).  A line fuse is usually present as well to prevent a meltdown in case
of a catastrophic failure.  It rarely can prevent damage to the supply in the
event of an overload, however.
<p>
Line rectification is usually via a voltage doubler or diode bridge.  One
common circuit uses a bridge rectifier as a doubler or normal bridge by
changing one jumper.  The voltage across the switching transistor is usually
around 160-320 V.  Some universal supplies are designed to accept a wide
range of input voltages - 90-240 VAC (possibly up to 400 Hz or more) or
DC - and will automatically work just about anywhere in the world as long
as a suitable plug adapter can be found.
</p><p>
When Q1 turns on, current increases linearly in T1 based on the voltage
applied and the leakage inductance of T1's primary winding.  Little power
is transferred to the secondary during this phase of the cycle.  When Q1
turns off, the field collapses and this transfers power to the output.
The longer Q1 is on, the more energy is stored (until saturation at which
point it blows up).  Thus, controlling the pulse width of the Q1 on-time
determines the amount of power available from the output.
</p><p>
The output rectifier, CR2, must be a high efficiency, high frequency unit - a
1N400X will not work.  The pi filter on the output smooths the pulses
provided by CR2.  Sometimes, a full wave configuration is used with a
center tapped transformer secondary.
</p><p>
Note that the transformer, T1, is a special type which includes an air gap
in its core (among other things) to provide the inductive characteristics
needed for operation in flyback mode.
</p><p>
Multiple output windings on T1 provide for up to a half dozen or more
separate (and possibly isolated as well) positive or negative voltages
but as noted, only one of these is usually used for regulation.
</p><p>
A reference circuit monitors the main output and controls the duty
cycle of the switching pulses to maintain a constant output voltage.
(Secondary outputs are not shown in the above schematic.)
</p><p>
R1 is the startup resistor (some startup circuits are more sophisticated)
and provides the initial current to the switchmode transistor base.  In the
old days, SMPS controllers were designed with discrete components.  Assuring
stable operation is a challenge with any SMPS but particularly with the
flyback topology where leaving the drive on for too long will result in
transformer core saturation and instant smoke.  Nowadays, an IC PWM
controller chip is almost always used.  The block diagram of a one very
popular PWM controller IC is shown below.
</p><p>
Many small SMPSs use opto-isolators for the feedback.  An opto-isolator
is simply an LED and a photodiode in a single package.  As its name implies,
an opto-isolator provides the isolation barrier (between the low voltage
secondary outputs and the line connected primary) for the feedback circuit.
Typically, a reference circuit on the output side senses the primary output
voltage and turns on the LED of the opto-isolator when the output voltage
exceeds the desired value.  The photodiode detects the light from the LED
and causes the pulse width of the switching waveform to be reduced enough
to provide just the right amount of output power to maintain the
output voltage constant.  This circuit may be as simple as putting
the photodiode across the base drive to the BJT switch thus cutting
it off when the output voltage exceeds the desired value.  The reference is
often a TL431 or similar shunt regulator chip monitoring a voltage divided
version of the primary output. When the shunt regulator kicks in, the
opto-isolator LED turns on reducing the switchmode transistor drive.
There may be an adjustment for the output voltage.
</p><p>
Other designs use small pulse transformers to provide isolated feedback.
</p><p>
Where additional regulation is needed, small linear regulators may be
included following the output(s).
</p><p>
There are many other topologies for switching power supplies.  However, the
basic principles are similar but the detail differ depending on application.
The flyback topology described above is one of the most common for small
multi-output supplies.  However, you may find other types of circuits
in TVs and monitors.  Some are downright strange (to be polite).  I sometimes
wonder if engineers are given bonuses based on the uniqueness and difficulty
level of understanding their designs!

</p><h3><a name="smpsascl">Advantages of SMPSs compared to LPSs</a></h3>

The benefits provided by implementing switch mode operation are with
respect to size, weight, and efficiency.
<p>
</p><ul>
<li>Size and weight - since the transformer and final filter(s) run at a
 high frequency (we are talking about 10 kHz to 1 MHz or more), they can
 be much smaller and lighter than the big bulky components needed for
 50/60 Hz operation.  Power density for SMPSs compared to LPSs may
 easily exceed 20:1.
<p>
</p></li><li>Efficiency - since the switching devices are (ideally) fully on
 or fully off, there is relatively little power lost so that the
 efficiency can be much higher for SMPSs than for LPSs, especially
 near full load.  Efficiencies can exceed 85% (compared to 50-60%
 for typical LPSs) with improvements being made continuously in
 this technology.
</li></ul>
<p>
Since the advent of the laptop computer, cellular phone, and other portable
devices, the importance of optimizing power utilization has increased
dramatically.  There are now many ICs for controlling and implementing
SMPSs with relatively few external components.  Maxim, Linear Technology,
and Unitrode (now part of Texas Instruments) are just a few of the major
manufacturers of controller ICs.

</p><h3><a name="smpswasu">Where are SMPSs used?</a></h3>

Switch mode power supplies are commonly used in computer and other digital
systems as well as consumer electronics - particularly TVs and newer VCRs
though audio equipment will tend to use linear power supplies due to noise
considerations.  You will find SMPSs in:
<p>
</p><ul>
<li>PCs, workstations, minicomputers, large computers.
<p>
</p></li><li>Laptop and notebook computers, PDAs - both internal DC-DC converters
 and their AC power packs.
<p>
</p></li><li>Printers, fax machines, copiers.
<p>
</p></li><li>Peripheral and expansion boxes
<p>
</p></li><li>X-terminals and video terminals, point of sale registers.
<p>
</p></li><li>TVs, computer and video monitors.
<p>
</p></li><li>Many VCRs.
<p>
</p></li><li>Camcorder AC adapters.
</li></ul>
<p>
In additional, you will find DC-DC converters which are SMPSs without
the AC line connection, internally in an increasing number of consumer
and industrial applications including things like portable CD players.
</p><p>
The up side is that they are usually quite reliable, efficient, and cool
running.
</p><p>
The down side is that when a failure occurs, it may take out many parts
in the supply, though not usually the equipment being powered unless the
feedback circuitry screws up and there is no overvoltage protection.
</p><p>
</p><p>
<a name="smpsspt"></a>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<h2>Switchmode Power Supply Troubleshooting</h2>
<h3><a name="smpssaf">SAFETY</a></h3>

The primary danger to you is from the input side of the supply which is
directly connected to the AC line and will have large electrolytic capacitors
with 320 V or greater DC when powered (often, even if the supply does not work
correctly) and for some time after being unplugged (especially if the power
supply is not working correctly but does not blow fuses).
<p>
WARNING: The filter capacitors used in many switchmode power supplies can
store an amount of energy that can kill - always discharge and confirm
this before touching anything.
</p><p>
There is also risk of instantly destroying expensive parts of the supply
(and any attached equipment as well) like the switchmode power transistor
if your probe should slip and short something either directly or by killing
the feedback circuit.
</p><p>
These guidelines are to protect you from potentially deadly electrical shock
hazards as well as the equipment from accidental damage.
</p><p>
Note that the danger to you is not only in your body providing a conducting
path, particularly through your heart.  Any involuntary muscle contractions
caused by a shock, while perhaps harmless in themselves, may cause collateral
damage - there are many sharp edges inside this type of equipment as well as
other electrically live parts you may contact accidentally.
</p><p>
The purpose of this set of guidelines is not to frighten you but rather to
make you aware of the appropriate precautions.  Repair of TVs, monitors,
microwave ovens, and other consumer and industrial equipment can be both
rewarding and economical.  Just be sure that it is also safe!
</p><p>
</p><ul>
<li>Don't work alone - in the event of an emergency another person's presence
 may be essential.
<p>
</p></li><li>Always keep one hand in your pocket when anywhere around a powered
 line-connected or high voltage system.
<p>
</p></li><li>Wear rubber bottom shoes or sneakers.
<p>
</p></li><li>Don't wear any jewelry or other articles that could accidentally contact
 circuitry and conduct current, or get caught in moving parts.
<p>
</p></li><li>Set up your work area away from possible grounds that you may accidentally
 contact.
<p>
</p></li><li>Know your equipment: TVs and monitors may use parts of the metal chassis
 as ground return yet the chassis may be electrically live with respect to the
 earth ground of the AC line.  Microwave ovens use the chassis as ground
 return for the high voltage.  In addition, do not assume that the chassis
 is a suitable ground for your test equipment!
<p>
</p></li><li>If circuit boards need to be removed from their mountings, put insulating
 material between the boards and anything they may short to.  Hold them in
 place with string or electrical tape.  Prop them up with insulation sticks -
 plastic or wood.
<p>
</p></li><li>If you need to probe, solder, or otherwise touch circuits with power off,
 discharge (across) large power supply filter capacitors with a 2 W or greater
 resistor of 5-50 ohms/V approximate value (e.g., for a 200 V capacitor,
 use a 1K-10K ohm resistor).  Monitor while discharging and/or verify that
 there is no residual charge with a suitable voltmeter.  In a TV or monitor,
 if you are removing the high voltage connection to the CRT (to replace the
 flyback transformer for example) first discharge the CRT contact (under the
 insulating cup at the end of the fat red wire).  Use a 1M-10M ohm 1W or
 greater wattage resistor on the end of an insulating stick or the probe
 of a high voltage meter.  Discharge to the metal frame which is connected
 to the outside of the CRT.
<p>
</p></li><li>For TVs and monitors in particular, there is the additional danger of
 CRT implosion - take care not to bang the CRT envelope with your tools.
 An implosion will scatter shards of glass at high velocity in every
 direction.   There is several tons of force attempting to crush the
 typical CRT.  Always wear eye protection.
<p>
</p></li><li>Connect/disconnect any test leads with the equipment unpowered and
 unplugged. Use clip leads or solder temporary wires to reach cramped
 locations or difficult to access locations.
<p>
</p></li><li>If you must probe live, put electrical tape over all but the last 1/16"
 of the test probes to avoid the possibility of an accidental short which
 could cause damage to various components.  Clip the reference end of the
 meter or scope to the appropriate ground return so that you need to only
 probe with one hand.
<p>
</p></li><li>Use a proper high voltage probe or high voltage meter to measure voltages
 which are potentially beyond the capabilities of your DMM or VOM - not
 something cobbled together from 1/4 watt resistors!  Note that fault
 conditions or even testing at *reduced* input voltage may result in
 greatly excessive voltage on one or more outputs due to lack of regulation.
<p>
</p></li><li>It may be possible to perform some of the tests at greatly reduced voltage
 (e.g., 30 VDC to the chopper instead of 300 VDC) by supplying external
 power to the controller chip (if used) and injecting base/gate drive from a
 signal generator.  This would greatly reduce the shock hazard as well as
 equipment damage from a slipped probe or missed faulty component.
<p>
</p></li><li>Perform as many tests as possible with power off and the equipment
 unplugged.  For example, the semiconductors in the power supply section of
 a TV or monitor can be tested for short circuits with an ohmmeter.
<p>
</p></li><li>Use an isolation transformer if there is any chance of contacting line
 connected circuits.  A Variac(tm) is not an isolation transformer!
 The use of a GFCI (Ground Fault Circuit Interrupter) protected outlet is a
 good idea but will not protect you from shock from many points in a line
 connected TV or monitor, or the high voltage side of a microwave oven, for
 example.  (Note however, that, a GFCI may nuisance trip at power-on or at
 other random times due to leakage paths (like your scope probe ground) or
 the highly capacitive or inductive input characteristics of line powered
 equipment.)  A fuse or circuit breaker is too slow and insensitive to provide
 any protection for you or in many cases, your equipment.  However, these
 devices may save your scope probe ground wire should you accidentally connect
 it to a live chassis.
<p>
</p></li><li>Don't attempt repair work when you are tired.  Not only will you be more
 careless, but your primary diagnostic tool - deductive reasoning - will
 not be operating at full capacity.
<p>
</p></li><li>Finally, never assume anything without checking it out for yourself!
 Don't take shortcuts!
</li></ul>

<h3><a name="smpstips">Tips on SMPS troubleshooting</a></h3>

The diagnosis of problems in switchmode power supplies is sometimes made
complicated due the interdependence of components that must function
properly for any portion of the power supply to begin to work.  Depending on
design, SMPS may or may not be protected from overload conditions and may fail
catastrophically under a heavy load even when supposedly short circuit proof.
There is particular stress on the switching devices (they are often 800 V
transistors) which can lead to early or unexpected failure.  Also, SMPS may
fail upon restoration of power after a blackout if there is any kind of power
spike since turn-on is a very stressful period - some designs take this into
account and limit turn on surge.
<p>
However, the cause of many problems are immediately obvious and have simple
fixes - the blown chopper transistor or dried up main filter capacitor.
Don't assume your problem is complex and convoluted.  Most are not.
You should not avoid attempting a repair just because there is a slight
chance it will be more challenging!
</p><p>
A low power (e.g., 25 W) fine tip soldering iron and fine rosin core solder
will be needed if you should need to disconnect any soldered wires (on purpose
or by accident) or replace soldered components.  A higher power iron or small
soldering gun will be needed for dealing with larger components.  Never use
acid core solder or the type used for sweating copper pipes!
</p><p>
CAUTION: You can easily turn a simple repair (e.g., bad solder connections)
into an expensive mess if you use inappropriate soldering equipment and/or
lack the soldering skills to go along with it.  If in doubt, find someone else
to do the soldering or at least practice, practice, practice, soldering and
desoldering on a junk circuit board first!  See the document:
<a href="http://www.repairfaq.org/sam/tshoot.htm">Troubleshooting and Repair of Consumer Electronic
Equipment</a> for additional info on soldering and rework techniques.

</p><h3><a name="smpstste">Test equipment</a></h3>

The most valuable piece of test equipment (in addition to your senses)
will be a DMM or VOM.  These alone will suffice for most diagnosis of
faulty components (like shorted semiconductors or open fusable resistors).
<p>
CAUTION: If the SMPS (or any other piece of equipment) is capable of producing
voltages beyond 1,000 V (or the max range on your meter), make sure you use a
proper high voltage probe or high voltage meter - fault conditions could
easily result in voltages in the system that are way beyond those that are
expected, even if run at reduced input voltage and/or with a series current
limiter.
</p><p>
In designs using controller ICs, an oscilloscope comes in handy when there
are startup or overcurrent/voltage shutdown or cycling problems.  Since
everything runs at a relatively low frequency, almost any scope will do.

</p><h3><a name="smpsihw">Incredibly handy widgets</a></h3>

These are the little gadgets and homemade testers that are useful for many
repair situations.  Here are just a few of the most basic:
<p>
</p><ul>
<li>Series light bulb for current limiting during the testing of TVs,
 monitors, switching power supplies, audio power amplifiers, etc. I built
 a dual outlet box with the outlets wired in series so that a lamp
 can be plugged into one outlet and the device under test into the other.
 For added versatility, add a regular outlet and 'kill' switch using a
 quad box instead.  The use of a series load will prevent your expensive
 replacement part like a switchmode power transistor from blowing if
 there is still some fault in the circuit you have failed to locate.
 (Now, if I would only remember to do this more often!).  See the section:
 <a href="#smpstslbt">The series light bulb trick</a>.
<p>
</p></li><li>A Variac.  It doesn't need to be large - a 2 A Variac mounted with
 a switch, outlet and fuse will suffice for most tasks.  However,
 a 5 amp or larger Variac won't hurt.  If you will be troubleshooting
 220 VAC equipment in the US, there are Variacs that will output 0-240 VAC
 from a 115 VAC line (just make sure you don't forget that this can easily
 fry your 115 VAC equipment.)  By varying the line voltage, not only can
 you bring up a newly repaired monitor gradually to make sure there are no
 problems; you can also evaluate behavior at low and high line voltage.
 This can greatly aid in troubleshooting power supply problems.  WARNING: a
 Variac is an autotransformer - not an isolation transformer and does not help
 with respect to safety.  You need an isolation transformer as well.
<p>
 Note: Some SMPS designs require power to be applied instantly to provide
 the startup voltage to the controller.  If this is the case with yours,
 it won't be possible to bring up the voltage slowly (unless you power that
 chip separately).  However, it should still be possible to run the unit
 somewhat reduced line voltage.  Also, running any SMPS at reduced line
 voltage is stressful.  It may also result in outputs that are not properly
 regulated and go much higher than normal.  Thus, a Variac should be used
 with caution - with the outputs connected to dummy loads instead of the
 powered equipment and a series current limiter (e.g., light bulb) in the
 input.
</p><p>
</p></li><li>Isolation transformer.  This is very important for safely working on
 live chassis equipment like line connected switchmode power supplies
 (primary side).  You can build one from a pair of similar power
 transformers back-to-back (with their highest rated secondaries
 connected together.  I built mine from a couple of similar old
 tube type TV power transformers mounted on a board with an outlet box
 including a fuse.  Their secondary high voltage windings were connected
 together to couple the two transformers together. The unused low voltage
 windings can be put in series with the primary or output windings to
 adjust voltage.  Alternatively, commercial line isolation transformers
 suitable for TV troubleshooting are available for less than $100 - well
 worth every penny.
<p>
 There is absolutely no imaginable reason not to use an isolation
 transformer for troubleshooting SMPSs except possibly for the final test
 where confirmation is needed that the inrush from a direct line connection
 (which will have virtually unlimited instantaneous current capability)
 will not damage the newly repaired supply.
</p><p>
</p></li><li>Variable isolation transformer.  You don't need to buy a fancy combination
 unit.  A Variac can be followed by a normal isolation transformer.  (The
 opposite order also works.  There may be some subtle differences in
 load capacity.).
</li></ul>

<h3><a name="smpssafdc">Safe discharging of capacitors in switchmode power supplies</a></h3>

A working SMPS may discharge its capacitors fairly quickly when it is shut
off but DO NOT count on this.  The main filter capacitors may have bleeder 
resistors to drain their charge relatively quickly - but resistors can fail
and the term 'quickly' may be relative to the age of the universe.  Don't
depend on them.
<p>
The technique I recommend is to use a high wattage resistor of about
5 to 50 ohms/V of the working voltage of the capacitor.  This isn't critical -
a bit more or less will be fine but will affect the time it takes to fully
discharge the capacitor.  The use of a current limiting resistor will
prevent the arc-welding associated with screwdriver discharge but will
have a short enough time constant so that the capacitor will drop to
a low voltage in at most a few seconds (dependent of course on the
RC time constant and its original voltage).
</p><p>
Then check with a voltmeter to be double sure.  Better yet, monitor
while discharging.
</p><p>
Obviously, make sure that you are well insulated!
</p><p>
For the power supply filter capacitors which might be 400 uF at 200 V, a
2 K ohm 10 W resistor would be suitable.  RC=.8 second.  5RC=4 seconds.
A lower wattage resistor (compared to that calculated from V^^2 / R) can
be used since the total energy stored in the capacitor is not that great
(but still potentially lethal).
</p><p>
The discharge tool and circuit described in the next two sections can be
used to provide a visual indication of polarity and charge for TV, monitor,
SMPS, power supply filter capacitors and small electronic flash energy
storage capacitors, and microwave oven high voltage capacitors.
</p><p>
Reasons to use a resistor and not a screwdriver to discharge capacitors:
</p><p>
</p><ul>
<li>It will not destroy screwdrivers and capacitor terminals.
<p>
</p></li><li>It will not damage the capacitor (due to the current pulse).
<p>
</p></li><li>It will reduce your spouse's stress level in not having to hear those
 scary snaps and crackles.
</li></ul>

<h3><a name="smpscapdt">Capacitor discharge tool</a></h3>

A suitable discharge tool for each of these applications can be made as
quite easily.  The capacitor discharge indicator circuit described below
can be built into this tool to provide a visual display of polarity and
charge (not really needed for CRTs as the discharge time constant is
virtually instantaneous even with a multi-M ohm resistor.
<p>
</p><ul>
<li>Solder one end of the appropriate size resistor (for your application)
 along with the indicator circuit (if desired) to a well insulated clip 
 lead about 2-3 feet long.  For safety reasons, these connections must be
 properly soldered - not just wrapped.
<p>
</p></li><li>Solder the other end of the resistor (and discharge circuit) to a well
 insulated contact point such as a 2 inch length of bare #14 copper wire
 mounted on the end of a 2 foot piece of PVC or Plexiglas rod which will
 act as an extension handle.
<p>
</p></li><li>Secure everything to the insulating rod with some plastic electrical tape.
</li></ul>
<p>
This discharge tool will keep you safely clear of the danger area.
</p><p>
Again, always double check with a reliable voltmeter or by shorting with
an insulated screwdriver!

</p><h3><a name="smpscapdi">Capacitor discharge indicator circuit</a></h3>

Here is a suggested circuit which will discharge the main filter capacitors
in switchmode power supplies, TVs, and monitors.  This circuit can be built 
into the discharge tool described above.
<p>
A visual indication of charge and polarity is provided from maximum input
down to a few volts.
</p><p>
The total discharge time is approximately 1 second per 100 uF of capacitance
(5RC with R = 2 K ohms).
</p><p>
Safe capability of this circuit with values shown is about 500 V and 1000 uF
maximum.  Adjust the component values for your particular application.
</p><pre>
(Probe)
&lt;-------+
 In 1   |
        /
        \    2 K, 25 W     Unmarked diodes are 1N400X (where X is 1-7)
        /                   or other general purpose silicon rectifiers.
        \  
        |
        +-------+--------+
      __|__   __|__      |
      _\_/_   _/_\_      /
        |       |        \ 100 ohms
      __|__   __|__      /
      _\_/_   _/_\_      |
        |       |        +----------+
      __|__   __|__    __|__      __|__      Any general purpose LED type
      _\_/_   _/_\_    _\_/_ LED  _/_\_ LED   without an internal resistor.
        |       |        |    +     |    -   Use different colors to indicate
      __|__   __|__      +----------+         polarity if desired. 
      _\_/_   _/_\_      |                   
 In 2   |       |        |
&gt;-------+-------+--------+
(GND Clip)

</pre>
The two sets of 4 diodes will maintain a nearly constant voltage drop of about
2.8-3 V across the LED+resistor as long as the input is greater than around
20 V.  Note: this means that the brightness of the LED is NOT an indication
of the value of the voltage on the capacitor until it drops below about 20
volts.  The brightness will then decrease until it cuts off totally at around
3 volts.
<p>
Safety note: always confirm discharge with a voltmeter before touching any
high voltage capacitors!

</p><h3><a name="smpsvoltc">Voltage checkers</a></h3>

Whereas a multimeter is intended to measure voltages (and other things),
a checker is used mostly to just produce a quick indication of the presense
of voltage, its polarity, and other basic parameters.  One use is a quick,
but reliable indication of the status of the charge on a BIG capacitor.  An,
example of a simple version of such a device is the "capacitor discharge
indicator circuit" described above.
<p>
(From: Ian Field (ionfieldmonitors@ic24.net).)   
</p><p>
The version of the checker that I have, also contains a miniature 12 V
battery for continuity checking - any resistance less than about 22K will
produce some glow. It's handy for quick checks of semiconductor junctions -
in general if it produces a slight glow it's leaky, but transistor B/E
junctions have an inherent zener voltage, so there is usually some glow.
Also schottky-barrier diodes give a reverse leakage glow - this does not
mean they're faulty, check the Vf with the diode-check on a DMM before
binning! Any zener diode above 10-11 V can be given a quick test for S/C,
lower Vz will produce some glow - again check Vf before binning.
</p><p>
These checkers are getting hard to obtain, most of the component stockists
here only carry vastly over complicated (and expensive) versions with
built-in measurement computer and LCD - these wouldn't last 5 min's around
flyback circuitry! Some Automotive accessory shops have a simpler version
with no battery - always check that it's stated to be capable of measuring
AC or DC at 4 to 380 V before parting with money! The internal circuit should
contain the LED's, a 15 ohm resistor to limit the maximum surge current when
the PTC is cold and the special PTC film-thermistor. The battery can be
added with a button from a VCR front panel - but don't blame me if you kill
yourself because you didn't insulate the added components properly! There is
a more complicated non-battery version with 2 LED's close to the front of
the handle to indicate polarity and a row of LED's along the length of the
handle to indicate the voltage-range. This version contains 2 special PTC's
and a discrete-transistor bargraph circuit - there might be room to add a
battery inside the case. As for the special PTC this is the only place I've
seen them - one possibility that might be worthy of looking into is the
Siemens PTC SMPSU startup thermistor for TDA4600 control chips, this usually
has a series resistor of at least 270 ohms and is more likely to turn-up in
European TV set's, but I have seen it in early Matsushita IBM displays and a
few others (possibly Tandon) the PTC thermistor is always blue and looks
like a very-miniature copy of the Philips white-plastic PTC degauss
thermistor.

</p><h3><a name="smpstslbt">The series light bulb trick</a></h3>

When powering up a monitor (or any other modern electronic devices with
expensive power semiconductors) that has had work done on any power circuits,
it is desirable to minimize the chance of blowing your newly installed parts
should there still be a fault.  There are two ways of doing this: Use of a
Variac to bring up the AC line voltage gradually and the use of a series load
to limit current to power semiconductors.
<p>
Actually using a series load - a light bulb is just a readily available
cheap load - is better than a Variac (well both might be better still) since
it will limit current to (hopefully) non-destructive levels.
</p><p>
CAUTION: Running any SMPS at greatly reduced line voltage will be stressful
for it, especially if the output load is a significant fraction of its full
load ratings.  In addition, at some range of line voltage, the output
regulation may not work properly and the output(s) may go much higher than
expected.  Use dummy loads in place of the valuable equipment if possible
when doing such testing!
</p><p>
What you want to do is limit current to the critical parts - usually the
switchmode (chopper) power transistor of an SMPS or horizontal output
transistor (HOT) of a TV or monitor.  Most of the time you will get away with
putting it in series with the AC line.  However, sometimes, putting a light
bulb directly in the B+ circuit will be needed to provide adequate protection.
In that location, it will limit the current to the HOT from the main filter
capacitors of line connected power supplies.  This may also be required with
some switchmode power supplies as they can still supply bursts of full (or
excessive) current even if there is a light bulb in series with the AC line.
</p><p>
Actually, an actual power resistor is probably better as its resistance is
constant as opposed to a light bulb which will vary by 1:10 from cold to hot.
The light bulb, however, provides a nice visual indication of the current
drawn by the circuit under test.  For example:
</p><p>
</p><ul>
<li>Full brightness: short circuit or extremely heavy load - a major fault
  probably is still present.
<p>
</p></li><li>Initially bright but then settles at reduced brightness: filter capacitors
  charge, then lower current to rest of circuit.  This is what is expected
  when the equipment is operating normally.  There could still be a problem
  with the power circuits but it will probably not result in an immediate
  catastrophic failure.
<p>
</p></li><li>Pulsating: power supply is trying to come up but shutting down due to
  overcurrent or overvoltage condition.  This could be due to a continuing
  fault or the light bulb may be too small for the equipment.
</li></ul>
<p>
Note: for a TV or monitor, it may be necessary (and desirable) to unplug the
degauss coil as this represents a heavy initial load which may prevent the unit
from starting up with the light bulb in the circuit.
</p><p>
The following are suggested starting wattages:
</p><p>
</p><ul>
<li>40 W bulb for VCR or laptop computer switching power supplies.
</li><li>100 W bulb for small (i.e., B/W or 13 inch color) monitors or TVs.
</li><li>150-200 W bulb for large color monitors or projection TVs.
</li></ul>
<p>
A 50/100/150 W (or similar) 3-way bulb in an appropriate socket comes in
handy for this but mark the switch so that you know which setting is which!
</p><p>
Depending on the power rating of the equipment, these wattages may need to be
increased.  However, start low.  If the bulb lights at full brightness, you
know there is still a major fault.  If it flickers or the TV (or other device)
does not quite come fully up, then it should be safe to go to a larger bulb.
Resist the temptation to immediately remove the series light bulb totally from
the circuit at this point - I have been screwed by doing this.  Try a
larger one first.  The behavior should improve.  If it does not, there
is still a fault present.
</p><p>
Note that some TVs and monitors simply will not power up at all with any kind
of series load - at least not with one small enough (in terms of wattage) to
provide any real protection.  The microcontroller apparently senses the drop
in voltage and shuts the unit down or continuously cycles power.  Fortunately,
these seem to be the exceptions.

</p><h3><a name="smpswastm">What about SMPSs in TVs and monitors?</a></h3>

TVs and monitors have at least one SMPS - the horizontal deflection
flyback circuit and may have an additional SMPS to provide the low
voltages or the DC for the horizontal output transistor.  Most of the
theory of operation and troubleshooting techniques apply to these as
well.  However, manufacturers of TVs and monitors tend to be really
creative (can you say, obscure?) when it comes to these designs so a
little more head scratching is often necessary to decipher the circuit
and get into the mind of the designer.  However, the basic failure modes
are similar and the same test procedures may be used.

<h3><a name="smpscoscdt">Comments on SMPS capacitor discharging and testing with series loads</a></h3>

(From: Ian Field (ionfieldmonitors@ic24.net).)
<p>
At a pinch, discharging BIG electrolytic capacitors with a test lamp (230 V,
60 W in the UK; 115 V, 25 W in series in the US) will do, but if the lamp has
blown you are in for a nasty surprise! While I am not criticising the use of
spare high-wattage resistors, I tend to find that these get tidied away, so
there's none about when you need one!
</p><p>
The lamp sometimes get's used if I can't find an NTC, but I always check
with a voltage checker because of the risk! - power resistors can go O/C as
well whereas NTC thermistors generally fail S/C - which usually happens as a
result of some transient phenomenon such as a lightning-strike near the
underground power line.
</p><p>
This is unlikely with the energy dump of discharging an off-line
electrolytic (unless the equipment is still powered at the time!). My bench
isn't the tidiest in the world, so gadgets tend to get misplaced - including
power resistors with added discharge-progress LED indicators. This is where
an inrush-suppressor NTC comes into it's own, even without selecting the
type - it will discharge a capacitor almost instantaneously with the minimum
of arc-burn on the solder pads. Obviously the energy causes some heating -
in the case of large electrolytics direct-off-line rectifier
smoothing/reservoir the amount of heating is just sufficient to give an idea
of the condition of the capacitor - capacitor failure is comparatively rare,
so it's not often anticipated and can cause misleading symptoms - so making
this double as a routine check occasionally saves a hell of a lot of time!
</p><p>
The trick I have found works even better is to use a NTC inrush-current
suppressor thermistor. These items can be salvaged from a scrap monitor or
PSU, and careful selection may reveal some types with a "room temperature
resistance" of several kohms - with the line-voltage on a capacitor
discharging through them, self-heating reduces the resistance to a few
ohms. This reduces the welding-sputter as the contact current is only a few
milliamps - this rises to a few amperes as the capacitor "dumps" its charge as
the NTC resistance fall's with self-heating.
</p><p>
One point I would disagree on is that not all of the many electrolytics need
discharging! Most SMPSU's of any appreciable power have high energy
electrolytics in the secondary - whether this is expressed as high voltage or
high current. In the case of monitors, the post PWM-B+ rail has a large
storage electrolytic which can do appreciable damage in the event that
line-drive failure has prevented use of it's energy. The NTC thermistor method
helps here; after "dumping" the line voltage electrolytics - the NTC is at a
lower resistance and ready for following up on the lower charge electrolytics.
</p><p>
There is a point concerning "test-lamp dummy loads" this has more to do with
monitors than SMPSU boxes. As well as the suggested use to limit inrush
current to a safe value on SMPSU boxes - I also use this method on line-O/P
stages especially to verify that flyback-transformer failure was not the
original cause of B+PWM or SMPSU blow-up. Recently I have been caught-out a
few times because some "energy-star" designs are so efficient that the inrush
current of the lamp itself is ample to cause catastrophic damage! The UK
220/230 V 60 W test lamp I have here has a calculated operating resistance of
806.7/881.7 ohms compared to a measured cold resistance of about 67 ohms so
the PTC effect of the filament tends to limit the advantage!
</p><p>
To clarify my comment on confirming whether a faulty flyback transformer has
damaged the B+PWM; older circuits use a MOSFET buck-regulator, in which S/C
failure of the MOSFET feeds unregulated B+ to the line-O/P stage - This
invariably destroys the HOT and sometimes the transformer, but either could as
easily be the original cause. In any event - bypassing the B+PWM MOSFET via
the test lamp passes just enough current to see if the transformer is operable
- with the price of replacements, very few quotes are accepted - so it's well
worth making sure before ordering an expensive replacement or doing too much
repair work! More recently, the trend has been for flyback - step up B+
regulators. When the B+ MOSFET fails S/C it simply stalls the main SMPSU
(sometimes destroying the rectifier!). Since this type of B+PWM is step-up,
the operability of the flyback transformer can be checked by simply removing
the S/C MOSFET. The most recent designs appear to be based on semi-resonant
SMPSU topology - they resemble buck-regulator PWM controllers, but the PWM
MOSFET is at chassis potential and the transformer primary is at full
PSU-rail, the line-O/P transistor is between the two with the drive
transformer connected to provide an emitter-coupled blocking oscillator
configuration, to add "regen" to the base drive. The boost diode often
includes the buck-regulators "ringing-choke" in the "net inductive component"
that it recovers energy from! As the later configuration most closely
resembles the buck-regulator type, the test lamp is required to confirm
transformer operability - but the weird and wonderful circuit arrangements can
make it lots of fun working out where to connect it!
</p><p>
A voltage checker that I find indispensable is the Steinel Master check 3
from; Steinel GmbH &amp; Co. (KG Dieselstrabe 80-86 D-4836 Hertzebrock 1,
Germany).  The version I have consists of a pair of "inverse-parallel" LED's
in series with a metal-film PTC thermistor on a tiny ceramic tube former -
this has a very low thermal inertia so the PTC thermistor limits the current
to a safe value for the LED's for any applied voltage between 4 &amp; 380 V the
combination of 2 LED's give a clear indication of AC or DC polarity. When
this checker is used around SMPSU's, you can clearly see the effect of
minority carrier transition time losses in the rectifiers, because the
leading-edge of the waveform pushes the rectifiers Vf well in excess of 0.7 V
for the minority carrier injection delay - before the rectifier begins to
conduct. Where a PSU rectifier has two electrolytics and a choke in a Pi
filter, the checker will often reveal negative transients on the
electrolytic closest to the rectifier - which is a clear sign of capacitor
ESR failure.

</p><h3><a name="smpssfmod">SMPS failure modes</a></h3>

Also see the section: <a href="#smpsstsm">Sounds that SMPSs make</a>.
<p>
SMPS fail in many ways but the following are common:
</p><p>
</p><ul>
<li>Faulty primary-side components.  Rectifier diodes, filter capacitor(s),
 MOVs, and other parts located before the switchmode (chopper) transistor(s)
 may short due to a surge or lightning, or for no apparent reason.  Main
 fuse will blow instantly.
<p>
 Symptoms: Totally dead supply, fuse blows instantly (vaporizes or explodes)
 even if switchmode transistor is removed unless a fusable resistor has
 blown to protect the fuse. :)  Test all components on line side of
 high frequency transformer for short circuit failures with a multimeter.
</p><p>
</p></li><li>Shorted switchmode transistor - may take out additional parts such as
 fusable flameproof resistors in collector or emitter circuits of bipolar
 transistors or source or drain circuits for MOSFETs as well as gate
 components like the 15 or 18 V protection zener.  Main fuse will blow unless
 protected by fusable resistors and one or more of them blows first.
<p>
 Symptoms: Totally dead supply, fuse blows instantly (vaporizes or explodes
 unless fusable resistor has opened).  Measuring across C-E or D-S of
 switchmode transistor yields near zero ohms even when removed from circuit.
</p><p>
</p></li><li>Shorted rectifier diodes in secondary circuits - these are high frequency
 high efficiency diodes under a fair amount of stress.
<p>
 Symptoms:  In a very basic supply without overcurrent protection,
 the failure of one or more of these diodes may then overload the
 supply and cause a catastrophic failure of the switchmode power
 transistor (see above) and related components.  Thus, these should
 be checked before reapplying power to a supply that had a shorted
 switchmode transistor.
</p><p>
 On short circuit protected supplies, the symptom may be a periodic
 tweet-tweet-tweet or flub-flub-flub as the supply attempts to restart
 and then shuts down.  Any power or indicator lights may be blinking
 at this rate as well.
</p><p>
 Test with an ohmmeter - a low reading in both directions indicates a
 bad diode.  Sometimes these will test OK but fail under load or at
 operating voltage.  Easiest to replace with known good diodes to verify
 diagnosis.  Rectifiers either look like 1N400X type on steroids -
 cylinders about 1/4" x 1/2" (example: HFR854) or TO220 packages
 (example: C92M) with dual diodes connected at the cathode for positive
 supplies or the anode for negative supplies (the package may include a
 little diagram as well).  These may either be used with a center-tapped
 transformer, or simply parallel for high current capacity.  If in doubt,
 remove from the circuit and test with the ohmmeter again.  If not the
 output used for regulation feedback, try the supply with the rectifier
 removed.  As noted, a test with an ohmmeter may be misleading as these
 rectifiers can fail at full voltage.  When in doubt, substitute a known
 good rectifier (one half of a pair will be good enough for a test).
</p><p>
</p></li><li>Bad startup circuit - initial base (gate) drive is often provided by
 a high value, high power resistor or resistors from the rectified
 AC voltage.  These can simply open for no good reason.
<p>
 Symptoms:  In this case the supply will appear totally dead but all
 the semiconductors will check out and no fuses will blow.  Check the
 startup resistors with an ohmmeter - power resistors in the AC line
 input section.  WARNING: there will be full voltage on the main filter
 capacitor(s) - 1X or 2X peak or around 160 or 320 VDC depending on design.
 Discharge before probing.
</p><p>
</p></li><li>Dried up capacitors - either input or output side.
<p>
 Symptoms: The main filter capacitor may dry up or open and cause the
 output to be pulsing at 60 (50) or 120 (100) Hz and all kinds of
 regulation problems.  Measure voltage across main filter capacitor(s).
 If the reading is low and drops to a much lower value or 0 instantly
 upon pulling the plug, then one of these capacitors may be open or dried
 up.  If you have an oscilloscope, monitor for ripple (use an isolation
 transformer!!).  Excess ripple under moderate load is an indication of
 a dried up or open capacitor.
</p><p>
 In extreme cases, a main filter capacitor with greatly reduce capacity
 or that is totally open may result in failure of the switchmode transistor
 and a dead supply that blows fuses or fusable resistors.  Therefore, it is
 always a good idea to test the electrolytic capacitors whenever repairing
 a SMPS that has blown its switchmode transistor.
</p><p>
 Capacitors in the low voltage section may fail causing regulation problems.
 Sometimes there are slew rate limiting capacitors which feed from the
 primary output to the regulator controller to limit initial in-rush and
 overshoot.  A failure of one of these may mess up regulation at the very
 least.  For example, excess leakage may reduce the output of the main
 output (and as a consequence, all the others as well).
</p><p>
 Where a controller like a UC3842 is used, a failure of the capacitor on
 its Vcc pin may result in a aborted startup or cycling behavior as it is
 starved for juice each time it pulses the switchmode power transistor:
</p><p>
 (From: John Hopkins (bugs71@ptdprolog.net).)
</p><p>
</p><blockquote>
 "I have encountered a bad cap (10uf 35v) on the Vcc input of a UC3842 IC
  in the power supply.  Turn unit on, get very short burst of power supply
  output, then nothing.  Every time the 3842 output a pulse, it ran out of
  VCC.  Small part, big problem."
</blockquote>
<p>
 In almost all cases, when in doubt parallel a known good capacitor of
 similar capacitance and at least equal voltage rating (except for these
 slew rate limiting capacitors where substitution is the only sure test).
</p><p>
 For Panasonic (and other) VCR power supplies, it is common - almost assured
 after a few years - that one or more the output filter capacitors commonly
 fail and replacing all of them, while perhaps a brute force solution, will
 fix a whining supply or one having bad regulation or noise.  However, check
 the semiconductors as well before applying power.  See the section:
 <a href="#smpspvcr">Panasonic VCR SMPS</a>.
</p><p>
</p></li><li>Bad connection/cold solder joints - as with all other mass produced
 power systems (including TVs and monitors), cracked or defective
 solder connections are very common especially around the pins of
 high power components like transformers, power resistors and transistors,
 and connectors.
<p>
 These are particularly common with portable equipment.  Universal AC adapters
 for camcorders and laptop computers are often abused to the point of failure.
 Large components like the line filter choke and high frequency transformer
 are prone to crack the solder bond at their pins or even break loose from
 the circuit board.
</p><p>
 Symptoms: almost any kind of behavior is possible.  The unit may be erratic,
 intermittent, or totally dead.  Visually inspect the solder side of the
 circuit board with a bright light and magnifying glass if necessary.  Gently
 prod or twist the circuit board with an insulating stick to see if the
 problem can be made to change.  Note that a one-time intermittent can
 blow many components so inspecting for intermittents is a really good
 idea even you believe that all bad components have been replaced.
</p><p>
</p></li><li>Regulation problems - outputs high or low.
<p>
 Symptoms: voltage has changed and adjustment pot if one exists has no
 effect or is unable to set voltage to proper value.  Check components
 in the feedback regulator, particularly the opto-isolator and its associated
 circuitry.  A weak opto-isolator may allow for excessive output voltage.
 A shorted photodiode in the opto-isolator may prevent startup.  An open
 photodiode may lead to a runaway condition.  WARNING: probe these circuits
 with care both because of the safety issues but also since any slip of
 the probe may lead to a runaway condition and catastrophic failure of
 the switchmode transistor and its related parts as well as damage to
 any attached equipment.
</p></li></ul>
<p>
Note that the high frequency transformer does not make the top 10 list -
failure rates for these components are relatively low.  You better hope
so in any case - replacements are usually only available from the original
manufacturer at outrageous cost.
</p><p>
Most other parts are readily available from places service parts distributors
like MCM Electronics as well as general electronics distributors like DigiKey
and Mouser.
</p><p>
Rebuild kits are available for many common supplies used in VCRs, monitors,
terminals.  See the section: <a href="#smpsreppsrc">Repair parts sources</a>.
</p><p>
Also, while it is tempting to suspect any ICs or hybrid controllers
since it is thought that replacements are difficult and expensive to
obtain, these parts are pretty robust unless a catastrophic failure
elsewhere sent current where it should not have gone.  And, ICs at least,
are usually readily available.

</p><h3><a name="smpsstsm">Sounds that SMPSs make</a></h3>

Most switchmode power supplies when operating normally produce little or no
detectable sound.  The switching frequencies are usually well above the range
of human hearing, but your dog or pet dolphin might be driven nuts!
<p>
However, under various fault conditions, and sometimes when lightly loaded,
there may be tell-tail audible indications of the SMPS's state of happiness.
The cause may be in the SMPS itself or its load.
</p><p>
</p><ol>
<li>Tweet-tweet-tweet or chirp-chirp-chirp (sometimes flub-flub-flub) - Short
 circuit or current overload.  This is usually an indication of a shorted
 secondary-side rectifier and/or if in a TV or monitor using an SMPS, a
 shorted horizontal output transistor.  The power supply is in a repeating
 cycle attempting to start up, being dragged down by the overload, and
 shutting down.
<p>
</p></li><li>High pitched, but audible, whine - Excessive load.  Like (1), this may be
 caused by shorted components.  For example, a common failure a Panasonic
 VCR power supply is for the 18 V zener diode across the 15 V output to
 short due to dried up electrolytic capacitors.  The result in an overload
 and whine, but usually not a catastrophic failure of anything else.
</li></ol>
<p>
Which of (1) or (2) actually present will depend on the particular design of
the SMPS and the severity of the overload.  If the design uses a hard SCR
crowbar, an overvoltage condition may trigger one of the symptoms!
</p><p>
</p><ol start="3">
<li>Tick-tick-tick - Too little or no load.  In a TV or monitor using an SMPS,
 this is likely due to a lack of horizontal drive or a blown fuse or fusable
 resistor in the horizontal deflection system.  The power supply is in a
 repeating cycle of starting up, being unable to limit the regulated voltage
 to a safe value, and shutting down.  Attempting to power up an SMPS without
 an adequate dummy load may result in these symptoms.
<p>
</p></li><li>Hissing or white noise - possibly from inductors - this may be normal
 under certain conditions:
<p>
(From: Charlie Allen (charlie.allen@usa.net).)
</p><p>
</p><blockquote>
 "Some switchmode power supply inductors will make a hissing or white
  noise sound, typically when the circuit is lightly loaded and running in
  a "pulse skip" or PFM mode.  I have heard it on many DC/DC circuits. 
  You could try removing the coil and pouring in some epoxy."
</blockquote>
</li></ol>

<h3><a name="smpsgensta">General SMPS troubleshooting approach</a></h3>

The following sections provide a set of guidelines for attacking SMPS
problems.  Those in the next 5 paragraphs are common to SMPS using both
discrete and integrated controllers:
<p>
</p><ol>
<li>First, determine that it is not something trivial like a blown fuse
 due to a legitimate overload (that has since been removed).  I have
 a SCSI peripheral box that will blow its SMPS fuse if the SCSI cable
 is inserted live.
<p>
</p></li><li>Categorize the problem into: startup problem, catastrophic failure,
 incorrect outputs, or excessive ripple or noise.
<p>
</p></li><li>Determine what the proper output voltages should be.  Identify the
 main (regulated) output.
<p>
</p></li><li>Disconnect the supply from the equipment it is powering if possible.  This
 will prevent the possibility of expensive damage should the output voltages
 soar to stratospheric levels for some reason.  If this is not possible, you
 will need to be extra careful - always use a Variac to bring up the input
 slowly and monitor the main output at all times.
<p>
 Note: Some SMPS designs require power to be applied instantly to provide
 the startup voltage to the controller.  If this is the case with yours,
 it won't be possible to bring up the voltage slowly (unless you power that
 chip separately).  However, it should still be possible to run the unit
 somewhat reduced line voltage.
</p><p>
 CAUTION: Running any SMPS at greatly reduced line voltage will be stressful
 for it, especially if the output load is a significant fraction of its full
 load ratings.  In addition, at some range of line voltage, the output
 regulation may not work properly and the output(s) may go much higher than
 expected.  Use dummy loads in place of the valuable equipment if possible
 when doing such testing!
</p><p>
</p></li><li>Determine an appropriate load for the outputs (if not connected to the
 equipment).  A typical SMPS will want a minimum of 5% to 20% of full load
 current at least on the main output to regulate properly.  Others may not
 need any load - it depends on the design or they may have an internal
 load.  Here are some typical load currents:
<p>
 </p><ul>
 <li>VCR - 0.2 A on +5 V and +12 V outputs.
 </li><li>PC - 2 A on +5 V, 1 A on +12 V.  A dual beam auto head light works well.
 </li><li>Monitor - 0.2 A on +60 V to +120 V output.
 </li><li>Typical 40 W switcher = 1 A on +5 V and +12 V.
 </li></ul>
</li></ol>

<h3><a name="smpstsudc">Troubleshooting SMPSs using discrete controllers</a></h3>

The following paragraphs apply mainly to SMPSs using discrete circuitry
(no ICs) for pulse width control.  For those using integrated controller
chips, see the next section: <a href="#smpstsuic">Troubleshooting SMPSs
using integrated controllers</a>.
<p>
</p><ul>
<li>Startup problems - check the power on the switchmode transistor and
 work back from there if there is none.  Check for open fusable resistors
 in the return as well.  Determine if there is startup base/gate drive.
 Check for open startup resistors, bad connections, blown parts in the
 controller circuitry.
<p>
</p></li><li>Blows fuses - check primary side components, switchmode transistor(s), and
 all other semiconductors for shorts.  Then check for open fusable resistors
 and bad connections.  Finally, check the electrolytic capacitors for reduced
 capacity and leakage.
<p>
</p></li><li>Power cycling - monitor current and voltage sensing signals to determine
 if they are actually signaling a fault.  Open or out of tolerance
 resistors may result in incorrect sensing.  With the series light bulb
 and/or Variac, disable each of these inputs by bypassing the appropriate
 components.  If one of these experiments prevents the cycling behavior,
 either that circuit has a faulty component or the controller circuit
 is not functioning properly.
<p>
</p></li><li>Regulation or ripple/noise problems - check main HV filter capacitor
 and other filter capacitors for decreased value or opens.  Check
 regulation components including shunt regulators and zener diodes.
</li></ul>

<h3><a name="smpstsuic">Troubleshooting SMPSs using integrated controllers</a></h3>

Since there are usually several fault conditions that can result in
an aborted startup or cycling behavior, the basic troubleshooting
procedure needs to be modified when dealing with SMPS using controller
ICs like the UC3840 or UC3842.
<p>
Also see the section: <a href="#smpstcofss">Typical controller ICs found in
small switchmode power supplies</a> for descriptions of two common integrated
controller ICs.
</p><p>
The following paragraphs apply to SMPSs using integrated controllers.  For
those using discrete components only (no ICs), see the previous section:
<a href="#smpstsudc">Troubleshooting SMPSs using discrete controllers</a>.
</p><p>
</p><ul>
<li>Startup problems - check the power on the switchmode transistor and
 work back from there if there is none.  Check for open fusable resistors
 in the return as well.  Check for power to the controller.  Determine
 that no fault condition inputs have abnormal voltages during startup.
 Check for drive out of the controller IC and see if it reaches the
 switchmode transistor.  You will probably need to power cycle the line
 input and monitor each of the relevant signals as you do so.  (It may not
 be possible to bring up the voltage slowly with a Variac if the startup
 circuit uses capacitive or inductive coupling to generate the intial
 supply voltage for the controller chip.  However, a Variac can still be used
 to run it at reduced voltage if this is the case.)  Determine if the supply
 is shutting down abnormally due to a legitimate or bogus over-current or
 over-voltage condition or is never actually starting up due to a lack of a
 voltage or a stuck-at fault on a sense line.  Monitor its power to determine
 if it is stable during startup - a bad capacitor or diode could result in
 insufficient or decreasing voltage which causes the controller to give up.
<p>
 CAUTION: Running any SMPS at greatly reduced line voltage will be stressful
 for it, especially if the output load is a significant fraction of its full
 load ratings.  In addition, at some range of line voltage, the output
 regulation may not work properly and the output(s) may go much higher than
 expected.  Use dummy loads in place of the valuable equipment if possible
 when doing such testing!
</p><p>
 Powering the controller separately may aid in troubleshooting of these
 and related problems.  This will decouple the chopper drive from the
 voltage usually derived via a winding on the high frequency transformer
 to power the controller once the supply is running.
</p><p>
</p></li><li>Blows fuses - check primary side components, switchmode transistor(s), and
 all other semiconductors for shorts.  Then check for open fusable resistors
 and bad connections.  There is a chance that a blown transistor took out
 the controller chip as well.  Under normal conditions, controllers like
 the UC3840 or UC3842 should current limit on a PWM cycle-by-cycle basis.
 Therefore, a blown fuse indicates a failure of either the switchmode
 transistor, controller or both.
<p>
</p></li><li>Power cycling - First make sure you are providing the minimum load if
 one is required.  Many SMPSs will cycle on overvoltage if there is none.
 Some may blow up!  Assuming the load conditions are normal, monitor current
 and voltage sensing and Vcc inputs to controller to determine which, if any,
 are at fault.  Open or out of tolerance resistors may result in incorrect
 sensing.  Check for faulty reference setting components like zener diodes.
 With the series light bulb and/or Variac, disable each of the sense inputs
 by bypassing the appropriate components.  If one of these experiments
 prevents the cycling behavior, either that circuit has a faulty component
 or the controller IC's input characteristics have changed and it will need
 to be replaced.  It should be possible to determine if these sensing
 reference levels are correct from the controller specifications and thus
 should be ignored by the controller as within normal limits.
<p>
</p></li><li>Regulation or ripple/noise problems - check main HV filter capacitor
 and other filter capacitors for decreased value or opens.  Check
 regulation feedback components to controller including any reference
 voltage output and zener diodes.  Determine if the controller is
 responding to error voltage.  If possible, monitor both error and PWM
 drive signals on a dual trace scope.
</li></ul>

<h3><a name="smpsiprt">Initial post-repair testing</a></h3>

Once defective parts have been replaced, if possible remove the normal load 
from the supply if you have not already done so just in case it decides to
put excessive voltage on its outputs and replace with a dummy load.  For a
multiple output supply, the most important output to have a load on is the
one that is used for regulation but some modest load on all the outputs is
preferred.  You should be able to determine a suitable value by considering
the application.  For something like a VCR, a few hundred mA on the main
output is probably enough.  This would require something like a 25 ohm 2 W
resistor for a 5 or 6 volt output or 50 ohm 5 W resistor for a 12 volt output
(depending on which is the primary output).  For a PC power supply, a couple
of amps may be needed - a 2 or 3 ohm 15 W resistor on the +5 output.  The
minimum load is sometimes indicated on the specification sticker.  In the
case of a TV or monitor, disconnecting the load may not be possible (or at
least, easy).
<p>
If available, use a Variac to bring up the input voltage slowly while
observing the main output.  You should see something at about 50% of
normal input voltage - 50 or 60 V for a normal 115 VAC supply.  With a
small load, the output should very quickly reach or even exceed its normal
value.  Regulation at very low line voltage may be far off - this is often
normal.  Just make sure you're using dummy loads so your equipment can't
be damaged.
</p><p>
Note: Some SMPS designs require power to be applied instantly to provide
the startup voltage to the controller.  If this is the case with yours,
it won't be possible to bring up the voltage slowly (unless you power that
chip separately.  So, if nothing happens when doing this, don't panic - it
may be a feature, not a bug. :)  It should still be possible to run the unit
somewhat reduced line voltage on the Variac.
</p><p>
If you do not have a Variac, put a light bulb in series with the
line (this is desirable in any case).  Use a 100 W bulb for a TV or PC,
40 W for a VCR typical.  The light bulb should limit the current to a
non-destructive value long enough to determine whether everything is OK.
It may not permit normal operation under full load, however.  When power
is first applied, the light bulb will flash briefly but may just barely
be glowing once the output has stabilized.  If it is fairly bright
continuously, there is likely still a problem in the supply.  See the
section: <a href="#smpstslbt">The series light bulb trick</a>.
</p><p>
Once you are finished, save your schematic and notes for the future.
For example, multiple models of VCRs even from different manufacturers
use the same basic design, maybe even the same supply.

</p><h3><a name="smpssgspsr">Some general switchmode power supply repair comments</a></h3>

Any time the switchmode transistor requires replacement, check all
semiconductors for shorts and fusable resistors for opens. even if you locate
what is thought to be **the** problem early on.  Multiple parts often fail
and just replacing the transistor may cause it to fail as a result of something
else still being bad.  In particular, check primary side electrolytic
capacitors for reduced capacity or opens.  These conditions can result
in a blown switchmode transistor as it attempt to supply adequate current
during the troughs of the rectified high voltage DC.  It only takes a few
more minutes.  For other problems like an open startup resistor this
excessive caution is unnecessary as these are usually isolated failures.
However, if any dried up electrolytics are found, it is good practice to
test them all - or just replace them all since the cost and time will be
minimal.  As they say, 'peas in a pod fail at nearly the same time'.
<p>
It is often helpful to trace the circuit by hand if a service manual is
not available.  You will gain a better understanding of this supply and
be able to put the knowledge to use when the next one shows up on your
bench - there is a lot of similarity even between different manufacturers.
A bright light behind the circuit board may help to make the foil runs and
jumpers more visible.  The only difficult part will be determining how the
transformer windings are hooked up.  An ohmmeter will help but even if you
cannot entirely determine this, just make a note.  For most purposes, the
exact topology of the windings is not critical for diagnostic procedures.

</p><h3><a name="smpsppcp">Periodic power cycling problems</a></h3>

These are of the form: tweet-tweet-tweet or flub-flub-flub or some other
similar variation.  Any LEDs may be flashing as well and in the case of
something like a monitor or TV, there may be HV static or even a partial
raster in synchrony with the sounds.  These types of problems are more
common with sophisticated implementations - the simple ones just blow up!
<p>
As noted elsewhere, shorted secondary components are a very likely cause
of this behavior.  These include diodes, capacitors, and overvoltage SCRs.
The fact that there is some output suggests that the main switchmode
(chopper) transistor is working. There would likely be no output at all
if it were bad.
</p><p>
Note that an underloaded supply may be cycling due to overvoltage and there
may actually be nothing wrong!  Many SMPSs require a minimum load to maintain
stability and to provide proper regulation.  This is typically 20 percent of
maximum on the primary output (the one which drives the feedback loop).
However, minimum loads may also be needed on other outputs depending on
design.  The only way to be sure is to check the manufacturer's specs.
</p><p>
Other possibilities for periodic or pulsing outputs:
</p><p>
</p><ol>
<li>One of the diodes is failing at volage - quite possible.  As long as
 you do not remove both from the output that is used for feeback, it
 should be safe to take them out one at a time and then substitute
 for the one remaining in the feedback voltage.  Use a Variac and
 series light bulb when testing in this manner and constantly monitor
 the main output.
<p>
</p></li><li>Some other cause of excessive current - shorted capacitor, transformer
 (though not likely), etc.
<p>
</p></li><li>Faulty current sense circuit - open or increased value resistor.
<p>
</p></li><li>Faulty voltage sense circuit - detecting overvoltage or regulation
 defective and it is shutting down (correctly).
<p>
</p></li><li>Faulty component in the startup circuit.  This could be a bad diode,
 resistor, or even an electrolytic capacitor that has changed value or
 is open at low voltage (when the controller is just waking up).
<p>
</p></li><li>Faulty controller IC (if applicable).
</li></ol>

<h3><a name="smpstswsd">Testing a SMPS without startup drive</a></h3>

Where an SMPS doesn't start and it isn't obvious why, it might help to
drive the chopper from an external signal source to see what then works.
The only time this is really practical is where a single transistor or
MOSFET is used - generating a push-pull waveform probably isn't worth it.
<p>
This will always be a risky procedure both for you and the power supply.
The switching frequency is likely unknown but for these tests you can assume
it is in the 10 to kHz range.  You can reduce the risk somewhat (to the
supply at least) by using a series light bulb load and/or running on reduced
line voltage.  The most important thing to avoid is putting in an excessively
long drive pulse which will result in the high frequency transformer
saturating, huge amounts of current, and likely a dead transistor and
possibly other parts if there is nothing to limit the current.  If you have
the option, start with a narrow pulse waveform to minimize on-time and don't
push your luck! :)
</p><p>
Similarly, where a power supply attempts to start but cycles or shuts down,
consider powering the controller chip from a separate supply to eliminate
any issues of the transformer derived voltage that normally runs it after
startup.
</p><p>
<a name="smpscfs"></a>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<h2>Components Found in Switchmode Power Supplies</h2>
<h3><a name="smpscus">Common, unusual, and strange</a></h3>

Most of the components used in switchmode power supplies are common and
easily identified.  However, some may be unfamiliar and unrecognizable.
Others could be totally custom parts - ASICs or hybrid circuits - developed
specifically for a particular model or product line.  However, these
rarely fail despite your temptation to blame them specifically *because*
locating a replacement is difficult and most likely expensive.
<p>
Common components like transistors, diodes, capacitors, and resistors, can
usually be tested with a multimeter at least for total failure.  Also see
the documents: "Testing of Bipolar Transistors with a VOM or DMM" and
"Testing Capacitors with a Multimeter and Safe Discharging".
</p><p>
Of course, with catastrophic failures, no equipment beyond your eyeballs
and nose may be needed.

</p><h3><a name="smpssctos">Switchmode (chopper) transistors and other semiconductors</a></h3>

Also see the document: <a href="http://www.repairfaq.org/sam/semitest.htm">Basic Testing of Semiconductor
Devices</a>.
<p>
</p><ul>
<li>Bipolar power transistors (often BU or 2SC/2SD numbers) - high voltage
 power types are used for the main switchmode (chopper) transistor.
<p>
 Test for shorted and open junctions.  These are the most common failures
 for the power transistors.  Partial failure where there is some leakage or
 various parameters change value are unlikely.
</p><p>
 Substitution of a transistor with at least equal voltage and current
 ratings should be fine for testing as long as you use a series light bulb
 to limit the current should something still be wrong elsewhere in the
 circuit.  A not-exact match may run hotter than normal.  Always use
 a heatsink.
</p><p>
</p></li><li>Power MOSFETs (2SK numbers) - many newer supplies are using these rather
 than the bipolar type.  In some ways they are more robust but testing is
 more difficult.
<p>
 Testing for shorts is still possible but anything beyond the "moist finger
 test" requires additional equipment than a multimeter.  However, the original
 problem did not blow a fuse or fusable resistor, if the MOSFET is not
 shorted, there is an good chance that it is still fine and you should look
 elsewhere for the problem.  It may be a problem with the startup circuit
 or controller.  There is also usually a 15 or 18 V zener across G-S for
 protection.  This may blow when the MOSFET dies.
</p></li></ul>
<p>
Note: if your supply produces any output (say, more than 10% of rated
voltage), it is unlikely that the chopper transistor is bad as it must
be working to some extent and, as noted, these usually blow totally.
</p><p>
</p><ul>
<li>Small bipolar transistors - these may be found in feedback and control
 functions.
<p>
 Test for shorted and open junctions with a multimeter.  Substitute with
 similar known good transistor is best, however.  I have seen little
 silicon transistors that had developed enough leakage to prevent a
 400 W supply from coming up!
</p><p>
</p></li><li>Diodes and rectifiers - a bridge or set of 2 or 4 discrete diodes is
 usually used for the AC line rectification and/or doubling.  High
 efficiency and/or fast recovery types are used in the secondary side
 for rectification of the various output voltages.  These may look like
 normal axial lead diodes or may be combined in pairs inside TO220 type
 packages.
<p>
 Test for shorted and open junctions.  However, sometimes, diodes will
 only fail with full voltage in-circuit but test good with a multimeter.
</p><p>
 Replacements for the primary side rectifiers are very inexpensive and
 readily available.  If the unit blows fuses with the switchmode transistor
 and main filter capacitors pulled, the rectifiers may indeed be bad.
</p><p>
 It is usually safe to remove secondary rectifiers one at a time to see
 if the supply will come up.  As long as you do not remove all diodes
 for the output that provides the feedback for the regulation, this should
 be relatively low risk.  (However, do this with a dummy load - not your
 expensive laptop computer just in case.)  Even removing those diodes is
 usually safe if you can power the supply using a Variac since you will
 be able to limit the input (while monitoring the main output) should the
 outputs go overvoltage.
</p><p>
</p></li><li>SCRs - small SCRs may be found in the overvoltage protection circuitry of
 some supplies.  Note that SCR type of crowbars are used across the output
 as a way to guarantee that an overvoltage condition will kill the output
 regardless of the reason for the overvoltage condition.  Hopefully,
 the supply's overcurrent protection will kick in rather than having the
 supply blow up.  This is not always the case, unfortunately.
<p>
 Test for shorts if output on which SCR is connected is not coming up.
 Remove the SCR.  Now, using a Variac to bring up the voltage slowly,
 see if the relevant output is going over voltage, is still clamped
 at a low level, or is the correct voltage (under load).  A momentary
 overvoltage spike at turn-on could also trip the crowbar.  This could be
 due to a faulty inrush/slew rate limiting circuit.
</p><p>
</p></li><li>TL431 or similar shunt regulator IC - either a TO92 or 8 pin DIP.  Has
 3 active terminals - A, C, and R.  Current will flow from C to A if R-A is
 greater than 2.5 V.
<p>
 Test for shorts but substitution is best.  However, with care (using a
 Variac AND series light bulb to limit the input current, it is possible
 to determine if the circuit in which these are connected is working.
 Short across TL431 - supply should either turn off or run at greatly
 reduced output.  Remove the TL431 - there should be no regulation - outputs
 should continue to climb as Variac is increased.  By monitoring input to
 TL431 it should be possible to determine if it is doing its job.
</p><p>
</p></li><li>Optoisolator - either a 4 or 6 pin DIP or a 4 pin cylindrical object.
 This provides the regulator feedback across the isolation barrier.
 Replacements are readily available.
<p>
 Test by putting 10-20 mA through LED and measuring decrease in resistance
 of reverse biased photodiode.  However, this will not identify a weak
 optoisolator.  Swapping is best.
</p></li></ul>

<h3><a name="smpscfbyp">Capacitors (filter and bypass)</a></h3>

<ul>
<li>Filter capacitors - electrolytic type are used for filtering of the
 rectified (possibly doubled) AC line input and for filtering of the various
 outputs of the power supply.
<p>
 If no capacitor checker is available, test for opens, shorts, and leakage
 with a multimeter.  For electrolytics, this is straightforward.  Inspect
 the capacitor for any discoloration, a bulging case, or other evidence
 of trauma.
</p><p>
 An ESR meter is a convenient device for rapidly checking the health of
 electrolytic capacitors.  The ESR (Effective Series Resistance) of a
 capacitor increases as the capacitor deteriorates ('dries up').  Even a
 capacitor that tests good on a capacitor checker may not work properly due
 to excessive ESR.
</p><p>
 When in doubt, the best approach is to substitute a known good capacitor of
 at least equal working voltage and similar uF rating.
</p><p>
 Also see the document: <a href="http://www.repairfaq.org/sam/captest.htm">Capacitor Testing, Safe
 Discharging and Other Related Information</a>.
</p><p>
 (From: Steve (libertytek@aol.com).)
</p><p>
</p><blockquote>
 "When you find a position that eats electrolytic caps, replace them but add a
  parallel .22 to .47 uF ceramic monolithic.
<p>
  Whenever these crappy caps are used with even small high frequency currents
  passing through them, they break down chemically causing other failures also.
  Even the "high ripple current" rated caps won't tolerate what they should and
  are often rated at 1,000 - 2,000 hours.
</p><p>
  I also often find too little heat sinking and will add more surface to
  improve cooling."
</p></blockquote>
<p>
</p></li><li>Bypass Capacitors - high quality plastic dipped or rectangular molded
 capacitors as part of RFI filter.  These rarely fail.
<p>
 Test for shorts - your multimeter will probably not be able to detect
 the small capacitance.  Substitute if in doubt.
</p><p>
 Note that many of these are special high quality low loss types with
 regulatory approval for use across the power line in the line filter.
 Exact replacements are required for safety.
</p></li></ul>

<h3><a name="smpsrnfntm" :="">Resistors (normal and flameproof), NTC thermistors, MOVs</a></h3>

<ul>
<li>Resistors - test for correct value with a multimeter.  If measured
 in-circuit, value may read low if shunted by other components.  If a
 higher than normal reading is obtained in-circuit, the resistor is bad.
 Metal film types like to go open circuit - especially very high value
 resistors.
<p>
 Startup resistors in particular tend to go open-circuit resulting in
 a dead supply but no blown fuses or fusable resistors.  These are
 usually high value (100K typical) medium wattage and run hot since
 they are across the full rectified line voltage.
</p><p>
</p></li><li>Flameproof or fusable resistors (They are the same) - these are often
 designated 'FR'.  They will look like power resistors but will be colored
 blue or gray, or may be rectangular ceramic blocks.  They should only be
 replaced with flameproof resistors with identical ratings.  They serve a
 very important safety function: they cannot catch fire when overheated
 and will open rather than changing value which implements an overload
 protection function.
<p>
 These usually serve as fuses in addition to any other fuses that may be
 present (and in addition to their function as a resistor, though this isn't
 always needed).  If an FR type resistor has blown, you probably have shorted
 semiconductors that will need to be replaced as well.  Check all the
 transistors and diodes in the power supply with an ohmmeter.  You may 
 find that the main switch mode transistor has decided to turn into
 a blob of solder - dead short.  Check everything out even if you find one
 bad part - many components can fail or cause other components to fail
 if you don't locate them all.  Check resistors as well, even if they look OK.
</p><p>
 The most common location for these in a small SMPS is in the return circuit
 of a the switchmode transistor.  However, they may be in the power feed
 as well.  The value may be a fraction of an ohm but can be larger.
</p><p>
 In TVs and monitors, these are often found in the hot power feed to the
 main low voltage power supply and in various secondary supply feeds as
 well.  For the main supply, they will be 5-25 W rectangular ceramic power
 resistors.  For the secondary supplies, they may be the 1/2-2 W blue or
 brown tubular variety.
</p><p>
 Test for opens.  Those in the return circuits are usually very low
 value - a fraction of an ohm to a few ohms - if in the return of the
 switchmode (chopper) transistor.  The type in the power feeds may be
 anywhere from a fraction of an ohm to several K ohms depending on the
 circuit load.
</p><p>
 For testing ONLY, a normal resistor may be substituted but the proper
 replacement MUST be installed before returning the supply to service.
</p><p>
 Since they function as fuses, flameproof resistors should not be replaced
 with higher wattage types unless specifically allowed by the manufacturer.
 These would not blow at the same level of overload possibly resulting in
 damage to other parts of the circuitry and increasing the risk of fire.
</p><p>
</p></li><li>MOVs - Metal Oxide Varistors - look like brightly colored plastic coated
 disk capacitors but not marked with capacitance.  These are surge
 suppressors.  A severe surge or lightning strike may obliterate one or
 more of these.  There will usually be either 1 between the Hot and Neutral
 or 3 across H, N, and safety ground.
<p>
 If they are visibly damaged in any way, just remove (for now) or replace.
 Test with an ohmmeter - resistance should be nearly infinite.
</p><p>
</p></li><li>NTC resistors (thermistors) - Negative Temperature Coefficient resistors
 act as inrush surge limiters.  There may be one or two of these in series
 with the AC input.  These are a high value when cold but drop to a low
 value once they heat up due to current flow into the supply.  These often
 look like fat black disk capacitors.
<p>
 Test when cold and hot (use a hot air gun or hair dryer if not in-circuit).
 Resistance should drop from 10s of ohms to a very low value.
</p></li></ul>

<h3><a name="smpstrnin">Transformers and inductors</a></h3>

<ul>
<li>High frequency transformers - these include the switchmode power
 transformer and any feedback (toroidal or E-I core type) transformers.
<p>
 The main transformer which provides line isolation and generates the multiple
 output voltages from the 150-320 VDC input rail.  These are usually custom
 wound for each model power supply and replacements are only available from
 the manufacturer.  However, some distributors will stock replacements for
 a few TVs and computer monitors.
</p><p>
 Testing for opens is usually easy since connections to the input (chopper)
 and output rectifiers are fairly obvious.  However, feedback windings may
 be involved and these are not readily determined without a schematic or
 tracing the circuit (and, possibly not even then.)  The good news is that
 failures of these transformers is less common than one might fear.
</p><p>
 Some supplies use small transformers for feedback rather than optoisolators.
 These can be tested for opens but rarely cause problems.   There may also be
 transformers in series with the input that can be similary tested.
</p><p>
 Identifying shorted turns requires a 'ring test' or measurement of the Q.
 See the document: <a href="http://www.repairfaq.org/sam/flytest.htm">Testing of Flyback (LOPT)
 Transformers</a>.
</p><p>
</p></li><li>Control/standby power transformers - used to provide power to the
 controller of some units when the main chopper is idle.  These may be
 damaged by a power surge, usually with an open primary winding.  Test with
 an ohmmeter.  A shorted winding will result in overheating.
<p>
</p></li><li>Inductors - test for opens.  Identifying shorted turns requires a 'ring
 test' or measurement of the Q.  See the document:
 <a href="http://www.repairfaq.org/sam/flytest.htm">Testing of Flyback (LOPT) Transformers</a>.
<p>
 AC line input inductors can just be bypassed if they test open.
</p><p>
 Output 'pi' filter inductors rarely fail but if you suspect one, just
 remove it and jumper across the pads for testing - ripple just won't be
 quite as good.
</p><p>
</p></li><li>Coupled Inductors - used as part of the Pi type RFI filter in the AC input
 circuit.  These look like small transformers but the windings are in series
 with the AC line.  There are usually 1 or 2 of these on better supplies
 and they are very reliable.
<p>
 Test for opens.  Identifying shorted turns requires a 'ring test' or
 measurement of the Q.  See the document: <a href="http://www.repairfaq.org/sam/flytest.htm">Testing of
 Flyback (LOPT) Transformers</a>.  These inductors can just be removed and
 bypassed during testing if they are open since they only affect input line
 noise filtering.
</p></li></ul>

<h3><a name="smpsfans">Fans</a></h3>

Many small SMPSs don't have any fans built in but expect there to be a fan
or fans elsewhere in the equipment designed draw air over the power supply.
Most computer power supplies do have a fan inside - and these are high
failure items due to how cheaply they are made.
<p>
A bad or tired fan, or even clogged air filters, can result in overheating
and outright failure, or at the very least, increased stress on components
and reduced life expectancy.  Thus, periodic maintenance is highly recommended.
Inspection of the fan(s) and filter(s) should be one of the first steps in
any testing procedure.
</p><p>
The most common problem with fans is dry/gummed up/worn bearings.  Ball
bearings are rarely found in PC power supplies (the manufacturer saved
25 cents).  Even on expensive workstation computers, mediocre fans may
be used (Sun Microsystems had to replace a whole bunch of fans on
state-of-the-art Ultra-Sparc systems because of bad bearings).  Quick
test: With the power off, give the fan a spin.  If it continues to coast
for at least a couple of seconds, the bearings are probably good.  If it
stops instantly, they are gummed up.  If in doubt, replace the fan with a
good quality ball bearing type.  It's really not worth attempting to
disassemble and oil the bearings unless you have nothing better to do.
</p><p>
Fan motors do go bad but this is much less common than bad bearings.  With
modern brushless DC motors, one phase could be defective resulting in sluggish
operation and/or failure to start if stopped in just the wrong position.
</p><p>
On more sophisticated equipment with temperature sensing to adjust fan speed,
the speed control circuitry could also be bad.
</p><p>
WARNING: Replacement of the fan on SMPSs requires access to the interior.  Make
sure the equipment is unplugged and the large filter capacitors are fully
discharged before doing anything inside the case - both for your safety and
to prevent damage to the supply.
</p><p>
For more on fans, fan motors, and lubrication, see the document:
<a href="http://www.repairfaq.org/sam/appfaq.htm">Notes on the Troubleshooting and Repair of Small
Household Appliance and Power tools</a>.
</p><p>
(From: Clive Cooper (clpc@cooperware.com).)
</p><p>
I spent 3 days searching for a problem on a SMPS.  It turned out to be a
simple fault that eluded me for some time.
</p><p>
The SMPS worked fine for about 10 minutes and then the output voltages
dropped slowly and eventually the supply went dead.
</p><p>
It turned out that the fan, although it appeared to be working fine was
only getting 60% of the supply voltage it needed.  This was due to a faulty
temperature sensor that just told the fan that the supply was cold even
when it was hot.
</p><p>
Conclusions: A fan that is blowing is not necessarily blowing what it
should be blowing and the fact that it seems to be working doesn't mean its
working at maximum efficiency.
</p><p>
<a name="smpsioi"></a>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<h2>Items of Interest</h2>
<h3><a name="smpspvcr">Panasonic VCR SMPS</a></h3>

The same power supply design is used with minor variations in a wide variety
of Panasonic (and clone) VCRs from the 1980s and 1990s (and may continue to
this day).  Depending on the specific model, there may slightly different
output voltages and number of outputs but the general organization is
identical.  These use discrete components throughout with feedback from
the primary output (5 to 5.2 V depending on model) using an optoisolator
to essentially short out the drive to the main chopper transistor (Q1) when
the output equals the desired voltage.  The most common problems found
with any of these supplies is dried up electrolytic capacitors.  Generally,
the first to go will be C16 and C17 on the +5.1 VDC line and/or C21 in the
feedback path (actual part type and number may vary slightly with model).
Symptoms will be either that the primary output is somewhat low (4 to 4.5 VDC)
or that the supply has gone overvoltage and blown the protection zener (D15)
resulting in a high pitched whine as the chopper struggles to drive current
into a short circuit (this usually doesn't damage any other parts if caught in
a reasonably timely manner).  If any capacitor related problems are found,
it is a good idea to replace all the electrolytics in the supply.  Model
specific capacitor kits as well as total rebuild kits are available from
places like <a href="http://www.iglou.com/studiosound/">Studio Sound
Service</a> and <a href="http://www.mcmelectronics.com/">MCM Electronics</a>.
<p>
The Panasonic VCR power supply schematic is available in both PDF and GIF
format:
</p><p>
</p><ul>
<li>Get VCRPS: <a href="http://www.repairfaq.org/sam/vcrps.pdf">vcrps.pdf</a> or
 <a href="http://www.repairfaq.org/sam/vcrps.gif">vcrps.gif</a>.
</li></ul>

<h3><a name="smpstcofss">Typical controller ICs found in small switchmode power supplies</a></h3>

Here is some information on the Unitrode UC3840 programmable off-line
PWM controller and its simplified cousin, the UC3842.  These are typical
of the types of sophisticated inexpensive integrated SMPS controller ICs
that are now readily available.
<p>
</p><ul>
<li><a href="http://www.unitrode.com/powsup.htm">Unitrode Datasheets</a> gets
  you Unitrode's power conversion controllers (more than 40 different
  devices!).
</li></ul>
<p>
A Web search should easily turn up other sources.
</p><p>
The information below is just a summary.
</p><p>
These devices generate the PWM pulse control to the switchmode (chopper)
transistor as well as various fault sensing and other control functions.
</p><p>
Parts such as these are now found in many small switchmode power supplies
and provide much more precise control during startup and normal operation, and
better handling of fault conditions compared to most implementations using
discrete circuitry.
</p><p>
However, they also result in additional head scratching when troubleshooting
since many faults or incorrectly detected faults can shut down the unit or
cause a power cycling type of behavior.  Therefore, a datasheet for the
controller chip will prove essential.  In many cases a scope will be needed
to monitor the various sense, control, and drive signals.  A systematic
troubleshooting approach must be used to eliminate power, startup, sensing,
and control components one at a time once obvious shorted or open parts or
bad connections have been eliminated from consideration.

</p><h3><a name="smpsuc3840">Unitrode UC3840 programmable off-line PWM controller</a></h3>

Features of the Unitrode UC3840 include:
<p>
</p><ol>
<li>Fixed frequency operation set by user selected components.
<p>
</p></li><li>A variable slope ramp generator for constant volt-second operation.
 providing open-loop line regulation and minimizing or in some cases,
 even eliminating the need for feedback control.
<p>
</p></li><li>A drive switch for low current start-up off of the high voltage line.
<p>
</p></li><li>A precision reference generator with internal over-voltage protection.
<p>
</p></li><li>Complete over-voltage, under-voltage, and over-current protection
 including programmable shutdown and restart.
<p>
</p></li><li>A high current single-ended PWM output optimized for fast turn-off of
 an external power switch.
</li></ol>
<p>
The following pin descriptions for the Unitrode UC3840 were derived from a
Unitrode application note.  Errors in interpretation are quite possible.
</p><pre>Pin 1: Compensation         Error amplifier (op amp) compensation network.

Pin 2: Start/U.V. lockout   This comparator performs three functions.  With
                            an increasing voltage, it generates a turn-on
                            signal at a start threshold. With a decreasing
                            voltage, it generates an under-voltage fault
                            signal at a lower level separated by a 200uA
                            hysteresis current.  At the under-voltage
                            threshold, it also resets the Error Latch if
                            the Reset Latch has been set.

Pin 3: OV sense             Over-voltage input from power supply output(s).

Pin 4: Stop (Ext stop)      External logic signal to inhibit power.

Pin 5: Reset                External logic signal to reset error condition
                            caused by (1) over-voltage, (2) over-current, (3)
                            input under-voltage detect, (4) external stop.

Pin 6: Current threshold    This voltage input sets the over-current trigger
                            levels for the internal comparators.

Pin 7: Current sense        This is the pulse-by-pulse PWM current control.
                            The input is a voltage taken across a series
                            resistor in the switchmode transistor's return.

                            There are two internal comparators with a
                            difference in threshold of 400 mV.  The one
                            with the lower threshold limits the current
                            for each PWM cycle.  The one with the higher
                            threshold sets the error flop-flop and shuts
                            down the supply if its threshold is ever
                            exceeded.

Pin 8: Slow start           This input limits the maximum PWM duty cycle.
                            During power-on, an RC delay can therefore
                            control the rate at which the output ramps up.
                            The final value limits the maximum PWM duty cycle
                            during normal operation.

Pin 9: Rt/Ct                R and C determine the constant PWM oscillator
                            frequency.

Pin 10: Ramp                Ramp generator output.

Pin 11: Vi sense            This voltage is normally derived from the DC
                            input and controls the slope of the ramp.

Pin 12: PWM output          This is the drive signal to the switchmode
                            transistor.  This is an open collector output
                            and will normally be used in conjunction with
                            the Driver bias (Pin 14) signal to provide
                            total drive to the switchmode transistor.

Pin 13:	Ground              Signal and drive common.

Pin 14: Driver bias         Supplies drive current to external power switch
                            to provide turn-on bias and pullup during normal
                            operation.  Disabled for shutdown if the Error
                            Latch is set.

Pin 15: Vcc                 UC3840 chip supply derived from the DC input rail
                            during startup and secondary winding on high
                            frequency transformer during normal operation.

Pin 16: 5 V reference       Stable voltage reference (output) for regulation
                            control.

Pin 17: Inv input           Error amplifier inverting input.
Pin 18: Non inv input       Error amplifier non-inverting input.

                            The difference between the inputs on Pins 17 and
                            18 control PWM duty cycle.  These will generally
                            be derived by comparing the main output with
                            the desired voltage reference.
</pre>

<h3><a name="smpsuc3842">Unitrode UC3842 off-line PWM controller</a></h3>

The UC3842 provides the necessary functions to implement an off-line
fixed frequency current mode control schemes with a minimal external
parts count.  Note how most of the pin functions are subsets of those
found in the more sophisticated UC3840.  The UC3842 retains most of
the features of the UC3840 but requires fewer external components and
comes in a much smaller package (8 vs. 18 pins).
<p>
The following pin descriptions for the Unitrode UC3842 were derived from a
Unitrode application note.  Errors in interpretation are quite possible.
</p><pre>Pin 1: Compensation         Error amplifier (op amp) compensation network.

Pin 2: Vfb                  Error amplifier (non-inverting) input for
                            regulation feedback.

                            This input is used to control PWM duty cycle
                            and is normally derived from the main regulated
                            output voltage.  It is similar in function to
                            The non-inverting input, Pin 18, of the UC3840.

Pin 3: Current sense        This is the pulse-by-pulse PWM current control.
                            The input is a voltage taken across a series
                            resistor in the switchmode transistor's return.

Pin 4: Rt/Ct                R and C determine the constant PWM oscillator
                            frequency.

Pin 5: Ground               Signal and drive common.

Pin 6: PWM output           This is the drive signal to the switchmode
                            transistor.  It uses a totem pole output which
                            has a high current drive capability both high
                            and low.

Pin 7: Vcc                  UC3842 chip supply derived from the DC input rail
                            during startup and secondary winding on high
                            frequency transformer during normal operation.

Pin 8: 5 V reference        Stable voltage reference (output) for regulation
                            control.
</pre>

<h3><a name="smpsuc3842d">Description of UC3842 startup operation and cycling problems</a></h3>

Depending on the particular circuit design, a variety of fault conditions can
result in cycling or shutdown of an SMPS controlled by a chip like the UC3842.
And, an underloaded supply may be cycling due to overvoltage!
<p>
In addition to the overload condition described below, a dried up electrolytic
capacitor on the Vcc line can also result in this cycling behavior since it is
unable to hold up the voltage between output pulses.  In addition, the sense
inputs can trigger shutdown.  In all, an often complex difficult to understand
and troubleshoot situation - sometimes too much so for its own good!
</p><p>
(Portions from: Yves Houbion (yves.houbion@fundp.ac.be).)
</p><p>
Pin 7 is the power supply (Vcc). The oscillator inside the 3842 begins to work
above 16 V on Vcc and stops working when this voltage drops below 11 V.  With
a stopped oscillator, the current consumption is very low, around 1 mA; with a
working oscillator, the current is much higher, about 12 mA.  (The specific
voltages and currents are typical values for one particular version of the
3842 and can vary from device to device and depending on model.)
</p><p>
Vcc is generally powered in two ways: a high value power (startup) resistor
connected to the main bridge (e.g., +300V) and a from a winding off the
transformer (via a rectifier/filter capacitor).  The value of the startup
resistor is selected such that there is more than 16 V with 1 mA but less than
11 V at 12 mA. So the oscillator can't continue to work with only the startup
resistor supplying power.
</p><p>
Suppose we apply AC power to the supply. The +300V comes on. First, the
3842 consumes only 1 mA, Vcc reaches 16 V, and the oscillator starts up. If
all is well (no overloads), the transformer provides the necessary 12 mA
current to maintain Vcc at more than 11 V.
</p><p>
However, if the transformer is overloaded, Vcc falls under 11 V and the
oscillator stops working.  The current decreases to 3 mA, the voltage increase
(coming from the +300V) the oscillator start again, ad-infinitum.
</p><p>
Tweet-tweet-tweet....

</p><h3><a name="smpssb12i">Switching between 115 VAC and 230 VAC input</a></h3>

Assuming it is not a wide compliance 'universal type', a common way to do
this is with a jumper (or switch) in the line input circuitry below
(also shown in <a href="http://www.repairfaq.org/sam/smpsvs.gif">Typical SMPS Input Voltage Select
Circuit</a>):
<pre>
                  D1
    AC o-----+----|&gt;|-------+---------+-----o DC (+)
            ~|    D2        |+        |
             +----|&lt;|----+  |       +_|_
                  D3     |  |     C1 ---
             +----|&gt;|----|--+       - |
             |    D4     |    +--o-o--+     +320 VDC to chopper
    AC o---+-+----|&lt;|----+ -  |  J1   |
           |~            |    |     +_|_
           +-------------|----+   C2 ---
                         |          - |
                         +------------+-----o DC (-)

</pre>
<ul>
<li>With the jumper, J1, installed, the circuit is a voltage doubler for use on
 115 VAC.  (D3 and D4 never actually conduct because they are always reverse
 biased.)
<p>
</p></li><li>With the jumper, J1, removed, the circuit is a simple bridge rectifier for
 use on 230 VAC.
</li></ul>

<h3><a name="smpscivsp">Changing the input voltage of a switchmode power supply</a></h3>

Would it be possible to modify a power supply designed for operation on
120 VAC for use overseas where the power is 240 VAC?
<p>
I don't advise it.  There are many factors involved in changing a power
supply unless it is designed for dual voltage or autoswitching.  They saved
a few cents if it is not easily switched, what can I say?
</p><p>
The problem is that it is probably a flyback converter and these are
pretty finicky about changes.  In addition to the caps, and switching
transistor, the transformer would probably saturate at the higher voltage
unless the switching frequency were also doubled.  Getting these things
to work normally without blowing up is touchy enough.  To change one
without a thorough understanding of all the design parameters would be
really risky.
</p><p>
Going the other way may be more realistic if (and this is a big if) you
will not be running at anywhere near full capacity.  Many switchmode 
power supplies will run on much lower than their rated input voltage.
However, regulation may be poor and the switchmode transistor will need
to be passing much higher current to maintain the same power output.
To maintain specifications could require extensive changes to the circuitry
and replacement of the switchmode transistor and possibly transformer and
other parts as well.  Again, I do not recommend this.
</p><p>
Use a small stepup or stepdown transformer instead.  The only exceptions are:
</p><p>
</p><ul>
<li>If there are clearly marked jumpers to select the input voltage.
<p>
</p></li><li>You can reverse engineer enough of the input circuitry to add/remove the
 needed connection with confidence.
<p>
 CAUTION: As they say in wood-working: "Measure twice, cut once".  Make sure
 you are dealing with the correct jumper AND you are going the right way
 (increasing or decreasing as needed).  If the manufacturer didn't include
 this feature, there may be a good reason!
</p><p>
</p></li><li>The supply is clearly marked as being autoswitching or having universal
 power input.
</li></ul>
<p>
Also see the secton: "Switching between 115 VAC and 230 VAC input".

</p><h3><a name="smpssmovp">Slightly modifying the output voltage of a PC power supply</a></h3>

Surplus PC power supplies are widely available and inexpensive.  However, what
do you do if 5 V isn't exactly what you need for a project?
<p>
(From: Winfield Hill (hill@rowland.org).)
</p><p>
Some of the PC power supplies I've dissected do have pots, by they have a
limited voltage-adjustment range.  One interesting thing, every design used a
TL431 chip, which is a 3-pin TO-92 regulating IC, as the voltage reference and
opto-feedback component.  Find this chip and trace out the resistors connected
to it to determine which part to change to make a higher voltage.
</p><p>
But, watch out for the SCR over-voltage circuit in some supplies.  This is
usually set to trip around 6 to 6.5 volts, and its trip point would need to be
modified as well.
</p><p>
As far as the step-down transformer turns ratio, there's little trouble one
will encounter here, because the power supply is no doubt designed to function
properly with reduced AC line voltages.  The penalty one will pay for turning
up the output voltage is a higher minimum AC voltage.
</p><p>
In most designs, the +12 and -12 V supplies merely track the 5V supply, and are
not separately regulated.  They may soar to higher voltages anyway if
unloaded, but will be additionally increased in voltage by the ratio of 5V
output increase.  Even though the rating of the 5V electrolytic may not be
exceeded, and still have a sufficient safety margin, this may not be the case
for the 12 V outputs.  So that issue should be examined as well.
</p><p>
Finally, a reminder for any reader tempted to break open the box and start
experimenting.  Voltages of up to 320 V are present, so be careful.  Know what
you're doing.  For safety, stay away from open supplies when plugged in, or
always keep one hand behind your back when probing.  Remember a the AC bridge
and HV DC and flyback transformer portion of all these supplies is operating
straight from the AC line, so don't connect the ground of your oscilloscope to
any of that circuitry.  A battery-operated multimeter is best.

</p><h3><a name="smpsusslf">Use of surge suppressors and line filters</a></h3>

Should you always use a surge suppressor outlet strip or line circuit?
Sure, it shouldn't hurt.  Just don't depend on these to provide protection
under all circumstances.  Some are better than others and the marketing
blurb is at best of little help in making an informed selection.  Product
literature - unless it is backed up by testing from a reputable lab - is
usually pretty useless and often confusing.
<p>
Line filters can also be useful if power in you area is noisy or prone
to spikes or dips.
</p><p>
However, keep in mind that most well designed electronic equipment
already includes both surge suppressors like MOVs as well as L-C
line filters.  More is not necessarily better but may move the point
of failure to a readily accessible outlet strip rather than the innards
of your equipment if damage occurs.
</p><p>
Very effective protection is possible through the use of a UPS (Uninterruptible
Power Supply) which always runs the equipment off its battery from the internal
inverter (not all do).  This provides very effective isolation power line
problems as the battery acts as a huge capacitor.  If something is damaged,
it will likely be the UPS and not your expensive equipment.  Another option
is to use a constant voltage transformer (SOLA) which provides voltage
regulation, line conditioning, and isolation from power spikes and surges.
Manufacturers of these products may even provide equipment damage warranties
which will reimburse for surge damage to the powered equipment while using
their products.  I am not sure how one proves that the UPS was being used at
the time, however!
</p><p>
It is still best to unplug everything if the air raid sirens go off or
you see an elephant wearing thick glasses running through the neighborhood
(or an impending lightning storm).

</p><h3><a name="smpsgfci">GFCI tripping with monitor (or other high tech equipment)</a></h3>

Ground Fault Circuit Interrupters (GFCIs) are very important for
minimizing shock hazards in kitchens, bathrooms, outdoors and other
potentially wet areas.  They are now generally required by the NEC Code
in these locations.  However, what the GFCI detects to protect people - an
imbalance in the currents in the Hot and Neutral wires caused possibly
by someone touching a live conductor - may exist safely by design in 3
wire grounded electronic equipment and result in false tripping of the
GFCI.  The reason is that there are usually small capacitors between
all three wire - Hot, Neutral, and Ground in the RFI line filters of
computer monitors, PCs, and printers.  At power-on and even while operating,
there may be enough leakage current through the capacitors between Hot
and Ground in particular to trip the GFCI.  Even for ungrounded 2 wire
devices, the power-on surge into inductive or capacitive loads like switching
power supplies may falsely trip the GFCI.  This is more likely to happen
with multiple devices plugged into the same GFCI protected outlet especially
if they are controlled by a common power switch.
<p>
Therefore, I do not recommend the use of a GFCI for computer equipment as
long as all 3 wire devices are connected to properly grounded circuits.
The safety ground provides all the protection that is needed.

</p><h3><a name="smpswdpssf">Why do power supplies seem to fail after a power outage?</a></h3>

Startup is the most stressful time for a typical switchmode power supply.
The output filter capacitors as well as the load must be driven while the
input voltage is changing - possibly wildly.  With careful design, these
factors can be taken into consideration.  Not all power supplies are designed
carefully or thoroughly tested under all conditions.  When power is restored,
surges, dips, brownouts, and multiple on-off cycles are possible.  This is
why it is always recommended that electronic equipment be unplugged until
power has been restored and is stable.
<p>
Supplies that are autoselecting with respect to input power are vulnerable
to voltages at an intermediate value between their low and high ranges.  At
some values, they may autoselect the incorrect input range:
</p><p>
(From: Mike Diack (moby@kcbbs.gen.nz).)
</p><p>
A subject dear to my heart due to a recent unpleasant experience -
Was using a Picturelel videoconference ISDN codec on a job when, because
of a powerline fault, the line voltage dropped to 170 volts. The PicTel
has a big Onan switchmode PSU which is autoswitching between 100-120 and
200-240 volts. It got confused, and (regrettably) chose the former....
with very smelly results. 
</p><p>
Moral: turn off things with cunning PSUs when brownouts occur (oh yes the
airconditioner units got very hot and tripped out, too)

</p><h3><a name="smpsbuzz">Buzzing or other sounds from SMPSs</a></h3>

Two common causes are (1) loose transformer (or other cores) vibrating at
a subharmonic of the switching frequency and (2) dried up electrolytic
capacitors (primary side) introducing 120 Hz hum under load.
<p>
(From: Ray Hackney (rhackney@unicomp.net).)
</p><p>
Simplistically speaking, the sound comes from something moving.
</p><p>
With non switch mode power supplies (SMPS), it may be ferrous material 
(like a metal cover) being drawn toward the power transformer. That's 
obvious since pushing on the cover will soften the hum. The frequency is 
usually 60Hz or 120Hz. 
</p><p>
The only time you should hear a "noise" from a SMPS is during a period of 
"unstable" operation (i.e. their "loop" isn't stable and in regulation.) 
That's why you may hear them "chirp" or whistle when you first turn them 
on or off. It may also indicate a PC type power supply that's overloaded. 
In years gone by, I've seen a quiet PC become a whistler after having a 
new, big (30 meg, full height!) hard disk added. Sometimes the pitch of 
the whistle would change depending on what parts of the system were being 
accessed or what software was being executed. (Usually, when the old 
Intel AboveBoard was being accessed in this '286, the audible pitch was 
lower indicating greater current draw.)
</p><p>
For all power supplies, it may be the windings on the "magnetics" 
(inductor or transformer). If they're not wound tightly and secured they 
can vibrate. Many video monitors exhibit this problem when their flyback 
transformer emits a whistle. It may be the windings themselves moving or 
the winding assembly may be loose on the core. 
</p><p>
Sometimes the capacitors in a SMPS will emit sound. Caps in SMPS' 
frequently have high AC current levels. If the supply is supposed to have 
what's known as "continuous current" and goes into "discontinuous 
current" mode, the capacitor plates get stressed pretty heavily and move 
in the capacitor body (but only with some types). Since the SMPS will go 
into and out of discontinuous mode at a rate &lt; 10kHz, it's audible. I've 
run into this on breadboards I've built for 200W and 2.5kW SMPS'. 

</p><h3><a name="smpscoole">Cool electrolytics - temperature rating versus ESR</a></h3>

(From: Jeroen H. Stessen (Jeroen.Stessen@philips.com).)
<p>
Electrolytic capacitors like to be kept cool!  If there's anything that these
capacitors can't stand, it's heat. It causes them to dry out.
</p><p>
Electrolytic capacitors exist in (at least) two different temperature
ratings: 85 C and 105 C. The latter are obviously more temperature resistant.
Unfortunately they also tend to have a higher ESR than their 85 C counterparts.
So in an application where the heat is due to I^2 * ESR dissipation, the 105 C
type may actually be a *worse* choice!  If the heat is due to a nearby hot
heatsink then 105 C is indeed a better choice.

</p><h3><a name="smpswbmw">When better may be worse</a></h3>

ESR is usually something to be minimized in a capacitor.  However, where the
original design depended (probably by accident) on a certain ESR, this may
not always be the case:
<p>
(From: Lee Dunbar (dunbar@unitrode.com).)
</p><p>
Substitutions of low ESR caps into circuits which had lousy caps is not
always the good idea that it appears to be.... Caution is advised, as low
ESR caps will not limit surge currents.
</p><p>
The circuits' series impedance drops (compare substituted capacitors ESR
when new with the original capacitor's ESR was when it was a new capacitor),
which, in turn, lets the surge magnitude rise, the higher currents destroy
can semiconductors and other components.
</p><p>
I guess what the industry needs is a good capacitor cross reference guide
for aluminum electrolytics!

</p><h3><a name="smpsastt">Alan's SMPS troubleshooting technique</a></h3>

(From: Alan Liefting (aliefting@ihug.co.nz).)
<p>
</p><ol>
<li>Replace all faulty components and check all semiconductors and resistors.
<p>
</p></li><li>Remove switching MOSFET or disconnect its supply voltage.
<p>
</p></li><li>Connect variable DC PSU to main secondary voltage (one which is
 monitored).
<p>
</p></li><li>Connect an oscilloscope to the gate of the switching MOSFET. As the DC
 voltage from the external PSU is increased to the value of what the SMPS
 output should be, a change in the mark-space ratio of the PWM waveform can be
 observed.  Only a small change in the supplied voltage around the SMPS output
 voltage is required to observe the effect as the power supply attempts to
 regulate.
<p>
 If the supplied voltage is increased further the PWM waveform will cease as
 the control circuit will detect an overvoltage.
</p></li></ol>
<p>
With this technique the whole power supply can be tested without fear of
destroying MOSFETs and it can be determined if the SMPS is regulating to
the correct voltage (if known!).
</p><p>
This will not work with all SMPS's. It depends on the design.

</p><h3><a name="smpsjnsr">John's notes on SMPS repair</a></h3>

(From: John Croteau (croteau@erols.com).).
<p>
Switchmode power supply repairs can be difficult. The problem is manufacturers
don't usually give you an easy test set up. They should tell you if it will
run at no load or what dummy load to use. Secondly they should tell you what
voltage or resistance to use to replace the opto-isolator (or transformer) for
that load. The SMPS hot side is a high frequency oscillator whose 'on time' is
varied by feedback supplied through the opto-isolator. The troubleshooting
procedure should normally be in this order.
</p><p>
</p><ol>
<li>First eliminate external causes such as shorts or no load as the cause of
 the shutdown.
<p>
</p></li><li>Eliminate the secondary side shorted diodes, capacitors, etc.
<p>
</p></li><li>After eliminating overloads on the outputs check the DC supply to the power
   device.
<p>
</p></li><li>Check the bias coming from the feedback. Trace the bias supplied by the
 feedback and try to determine what is the correct bias for that situation
 (usually no power same as start-up).
<p>
 </p><ul>
 <li>If the bias is as on the schematic then troubleshoot the hot (primary)
  side as any oscillator.
<p>
 </p></li><li>If the bias is wrong and there is no short on the output then concentrate
  on why the feedback doesn't supply the expected voltage to bias the
  scillator on.
 </li></ul>
<p>
</p></li><li>If you work on many of the same type SMPS:
<p>
 </p><ul>
 <li>Determine the normal load and make a dummy load. 
<p>
 </p></li><li>Determine the value of resistance that is created at the output of the
  opto-isolator (hint: use Ohm's law). Then remove one leg of the output
  of the opto-isolator and replace it with a resistor as calculated.
 </li></ul>
<p>
 By using a fixed load and cutting out the feedback it is very easy to
 troubleshoot. Don't forget to check the voltages and waveforms in your
 test set-up and record them for future reference.
</p></li></ol>

<h3><a name="smpsrcsr">Russell's comments on SMPS repair</a></h3>

(From: Russell Houlton (71101.2454@CompuServe.com))
<p>
I wanted to pass on some comments on repair of switchmode power supplies.
I've fixed a few myself.
</p><p>
</p><ol>
<li>I see quite a few where the filter capacitors have failed.  Not all
 electrolytic capacitors are the same.  You should get capacitors that
 are rated for high frequency service.  Use of "normal" caps that one
 finds in the local electronics stores are likely to go bad in about a
 year.  Not something a professional who values his reputation wants to
 see happen.  In fact, I suspect that some manufacturer fail to understand
 this and use the wrong caps causing common failures in their units.
 Especially units that may be subjected to use in warmer areas.  I see
 this mostly with specialized devices rather then mass consumer items.
<p>
 I highly recommend the Panasonic HFS series cap that can be bought from
 DigiKey (and other places I'm sure).  These unit are specially designed
 for good size as well as use in switching supplies.  They are also rated
 for 105 degrees C as opposed to the more common 85 degrees C temperature
 rating.  I have never had to replace a HFS cap I installed, where I've had
 to replace "common" caps in repair situations.  (No I don't sell the HFS
 or have stock in DigiKey, <g> I'm just passing some info that has worked
 well for me.)  (Note: The HFS series caps have been discontinued by
 Panasonic.  They recommended using the EEU-FC (FC series) as a replacment.
 --- Sam.)
</g></p><p>
</p></li><li>SMPS usually try to regulate one of the output voltages by using the
 switcher, usually it's the output with the most power, but might be
 the one that's most voltage critical.  If the filter caps go bad in
 the main output voltage, the auxiliary output voltages will go high.
 The SMPS may also start to make high-pitched sounds as the ripple messes
 with the feedback system.  The aux output voltages may go so high that
 the secondary regulator may go into foldback to protect itself.  I found
 this out the hard way.  It's really something that can kick you in the
 pants because normally one would not check the 5V supply if the problem
 seems to be a bad 23.5 V regulator. <bg>
<p>
</p></bg></li><li>Noisy (whining or buzzing) SMPSs that still work tend to be either bad
 main output voltage capacitors or bad electrolytics in the power
 oscillator circuit.  See the section: <a href="#smpsbuzz">Buzzing or other
 sounds from SMPSs</a>.
<p>
</p></li><li>Most SMPSs have also have a *minimum* power draw requirement from their
 loads.  This is especially true of the main output voltage.  If not enough
 power is drawn from the supply, the supply may not be stable and can not
 supply full power on the auxiliary voltages.  An example of this is using
 a 250 W PC power supply just to drive a disk drive.  Without the heavy 5 V
 power draw of a motherboard, the supply may not start up reliable or
 provide the needed 12 V power for the hard drives.
<p>
</p></li><li>I've also seen cases where one of the voltage doubler caps will open up
 causing failure in one of the switching transistor(s).  It will short out
 a single transistor unit, but in a dual switching unit, the transistor
 associated with the good cap will over-work itself and open.  An easy way
 to test is to remove the other switching transistor (in a dual unit) and
 apply power for 2 seconds. (Take all prudent precautions for working around
 a live and open unit!)  Disconnect power and use your voltmeter to check
 the voltage across each of the caps.  They should discharge at a roughly
 equal rate.  A bad cap will lose all it's voltage in less then 2 seconds.
 A good cap will hold it's charge much longer.
<p>
</p></li><li>Lastly, some unit that have the switch mode power supply in the same
 enclosure as the CRT will have a sync signal that comes from the horizontal
 flyback transformer.  This keeps the SMPS in sync with the display so that
 the small magnetic fields that are created by the SMPS don't create a wavy
 pattern on the screen.  Something to remember if a newly re-assembled unit
 shows a window screen like interference pattern on the display.
</li></ol>

<h3><a name="smpsbdhtp">Bob's description of how a typical PC power supply works</a></h3>

(From: Bob Wilson (rfwilson@intergate.bc.ca).)
<p>
I really suggest you refer to a handbook on basic switchmode power supply
design for the nitty-gritty.
</p><p>
I have a schematic of a 200 Watt PC power supply, and I assure you that there 
are enough cost-saving clever shortcuts in the design, that unless you know a 
fair amount about the design of switchers, it will just totally and completely
baffle you.
</p><p>
Nearly all 200 W PC power supplies are *identical* knock offs of one-another
(except for the power-good comparator section). The transformer has a +5 V 
output which is what is regulated. It also has a +12 V output and a -12 V 
output.  The -5 V output is derived from the -12 V output using a 7905 
regulator. All transformer outputs are related in voltage by the transformer 
turns ratio. The power supply topology is a Half Bridge, which normally
requires a "buck section" in each output (namely an inductor, catch diode and 
capacitor). To vastly improve the cross regulation between windings, a common 
core is used to wind all the 3 output inductors on.
</p><p>
Basically, however, a 200 W PC power supply is a half-bridge design, with a 
bridge-type voltage doubler in front which simply rectifies 220 V, or doubles 
110 V to 220 V. So the thing is basically a 220 Volt design.
</p><p>
The controller is typically a TI TL494 that operates off the output of the 
supply. This means that in order to start, there must already be an output 
voltage present! How they do this is really really clever, and also extremely 
confusing. The power transformer is itself, self oscillating. This generates 
a rudimentary output voltage that allows the thing to bootstrap up to normal 
operation, and the controller chip to take over.
</p><p>
The +12 Volt output is what is used to power the PWM chip.  Thus, the supply
runs off its own output. This is done to eliminate the need for troublesome
opto-coupler feedback. To boot itself up (after all, there is no initial +12 V
to allow itself to start), the driver transformer is modified (very cleverly)
to form part of a blocking oscillator. Thus the unit initially self oscillates
in a crude fashion until there is enough voltage on the +12 V output to allow
the PWM to start, which then swamps out the self oscillation and normal
operation commences.
</p><p>
Since the controller resides on the output side of the transformer, the drive 
to the 2 half-bridge NPN bipolar transistors is by a driver transformer (a
direct connection cannot be made because the transistors are on the primary
side).
</p><p>
Frequency of operation is 50 kHz, which is low by today's standards, but this 
means lower cost transformer winding (Litz wire is not needed, for example).

</p><h3><a name="smpsscpps">Steve's comments on PC power supply operation and repair</a></h3>

(From: Steve Bell (service@bell-electronics.freeserve.co.uk).)
<p>
There are not normally schematics available for PC power supplies.
</p><p>
If the PC's are very old, some service manuals included the PSU schematics -
but these will be very very old, like the early Apricot that used the Astec
AC9335, the Olivetti XT, and some PC's that ran CPM like the LSI Octopus.
</p><p>
Most AT class computers never had schematics available for their power
supplies, the manufacturers simply intended them to be swapped out.
Schematics were produced by the power supply manufacturers for companies such
as Compaq, Sun Microsystems etc, but these where only released to their
authorized service centres. These are far and few between and sign non
disclosure agreements, so schematics are not available to anyone else.  I
used to work for one such company, they repaired all of Sun's power supplies
from throughout Europe.
</p><p>
Here in the UK, and also in the USA, if a 'standard' AT or ATX power supply
fails it's often cheaper to replace. Many PC power supplies aren't
standard - we repair many from Compaq, Elonex, HP, Apple, Sun etc that are
non standard and can be repaired far cheaper than the manufacturers exchange
unit. Also in many countries a swap out isn't available or can be costly.
</p><p>
Even without schematics power supplies can be repaired. The same type of
circuitry repeats itself. Older power supplies often used the TL494C pwm IC,
newer use  the UC3842/3/4/5 series driving MOSFETs. Some older still used the
NE5560, SG3524 etc., many didn't use a PWM IC, but instead discrete
components. Data sheets on the IC's used are very useful.
</p><p>
Considering the 'standard' 200 W AT PSU, these usually use 2 T0220 power
transistors, and at power on a resistor, usually around 270 - 330 K turn on
the top transistor, and current flows in the inverter transformer. A winding
on the secondary supplies a voltage that is rectified and smoothed to feed
the PWM IC and its drivers. These then drive the 2 transistors via a
transformer and the power supply is running. The 5 V output voltage is then
sensed and fed back to the PWM IC to maintain regulation.  Most faults on
these types of power supplies involve the high value resistors failing
associated with the inverter transistors, the transistors and associated
components, bridge rectifier shorted - also check inrush thermistor for
cracks or pinholes. Secondary rectifiers can fail, and electrolytic caps can
fail if the fan stops. The PWM circuitry can always be fed with an external
DC supply and checked independently.
</p><p>
The other type of power supply, less common in older power supplies, uses
the UC3842 series PWM IC driving a single MOSFET. This IC sits on the primary
side, so its ground is floating high. An isolating transformer is needed
when scoping anything on the primary, with the scope ground clip to primary
ground.
</p><p>
Sourcing substitute components isn't normally difficult.  I'd start by
obtaining some decent transistor, diode and MOSFET data books so you can
relate faulty parts to what's available locally.
</p><p>
If the power supplies are all 200 W, a simple resistive load will suffice for
testing made from large ally clad resistors on a substantial heat sink.
These will toast when running for longer, so will need fan cooling - a cheap
desk fan is sufficient. If you are going to be repairing a lot of varying
power and type over a prolonged period, it may be better to build an active
load. This is basically banks of 2N3055's (for 5V &amp; 3.3V) and 2N3773 (for
12 V upwards) in series with low value power resistors than can have their
conduction varied and current monitored by other circuitry. You simply have
a lead for each power supply type you test/repair. Also don't forget to
check the PG o/p on the power supply.

</p><h3><a name="smpspcpsi">PC power supply information (pinouts, testing and non-standard uses)</a></h3>

When testing or operating a common PC (computer) power supply without
being connected to its mainboard and peripherals, a substitute load
must be provided.  This would be the case if you wanted to determine
whether a supply was good or wanted to use the supply for other purposes.
<p>
To test the supply, you want to:
</p><p>
</p><ul>
<li>Remove all of the (expensive) stuff - mainboard, drives, etc.  Unplug
 all of the power supply connectors.
<p>
</p></li><li>Provide a dummy load to +5 and +12 outputs.
<p>
</p></li><li>Typical (but not always) color codes for PC power supplies:
<p>
 </p><ul>
 <li>Red: +5, Yellow: +12, Black: Gnd (Probably case as well).
 </li><li>White: -5, Blue: -12, Orange: Power_good (output).
 </li></ul>
<p>
 (Some newer supplies may have a +3.3 output as well which may be green).
</p><p>
</p></li><li>PC power supplies (as well as most other switchers) need a minimum load
 on +5 and possibly on +12 as well.  An amp (e.g., 5 ohms on +5) should be
 enough.
<p>
 I use an old dual beam auto headlight.  It adds a touch of class as well
 to an otherwise totally boring setup. :-) You can also use auto tail light
 bulbs or suitable power resistors or old disk drives you don't really care
 about (you know, those boat anchors).
</p><p>
</p></li><li>There are no sense lines.  There is a 'Power_Good' line which is an output
 from the power supply to the mainboard and can be ignored unless you want to
 connect it to an indicator to let you know all the outputs are within specs
 (it may need a pullup and I don't know its drive capability).
<p>
</p></li><li>Pinout for the standard PC and clone connector (some companies like Compaq
 do NOT use this type of connector, however.).  Black (Gnd) wires together
 for the P8 and P9 connectors when installed to mainboard.
<p>
 </p><ul>
 <pre>  J8: Pin 1 = Power_Good   J9: Pin 1 = Gnd
      Pin 2 = +5               Pin 2 = Gnd
      Pin 3 = +12              Pin 3 = -5
      Pin 4 = -12              Pin 4 = +5
      Pin 5 = Gnd              Pin 5 = +5
      Pin 6 = Gnd              Pin 6 = +5
 </pre>
<p>
  Note: for an XT only, J8-Pin 1 is Gnd, J8-Pin 2 is no connect.
 </p></ul>
<p>
</p></li><li>The peripheral connectors are: Pin 1: +12, Pin 2 and 3: Gnd, Pin 4 = +5.
</li></ul>

<h3><a name="smpssafpc">Safe PC power supply loading</a></h3>

PC power supplies are often ideal for other purposes but the required loads
represent wasted power.  So, it would be nice to be able to eliminate them.
Unfortunately, it probably isn't easy to modify a PC power supply so less/no
load is needed for regulation.  However, it is worth testing a supply to see
how low you can actually go on the loads - many WILL regulate the +5 with no
load on the +12 but probably not the reverse.  While 20 percent load is often
recommended, 5 percent or less may work just fine.  And, some don't need any
additional loads on either output (they will probably include a minimal load
resistor internally).
<p>
CAUTION: Usually, a PC power supply will just shut down with too little load.
However, some may be much more unhappy.  Thus attempting to determine a safe
minimum load does entail some risk of letting the smoke out.
</p><p>
The reason that you need a load is that the PWM controller can't do down
to really small duty cycles needed for low loading.  The design would need to
be changed and differs from unit to unit.

</p><h3><a name="smpstpcax">Typical PC and ATX power supply schematic</a></h3>

<ul>
<li><a href="http://www.pavouk.org/">Domaci Stranka's Web Site</a> has
 a reverse engineered <a href="http://www.pavouk.org/hw/en_atxps.html">200
 W ATX PC Power Supply</a>.  (Local copy of diagram:
 <a href="http://www.repairfaq.org/sam/reppic/atxps.gif">Schematic of
 Typical ATX Power Supply</a>.)  Note: There are errors in this schematic.
 For example, one of the inputs to the overvoltage circuit (middle
 left) should be +12 VDC, not +5 VDC.  So, use it as a guide only.
</li></ul>

<h3><a name="smpsnatx">Notes on ATX power supply testing</a></h3>

You don't need a fancy "mainboard simulator" or "special ATX test tool" to
run an ATX power supply on the bench.
<p>
(From: Stefan Krommes (stkro@gmx.net).)
</p><p>
There is a wire (Power_Supply_On) on the ATX connector that will turn on
the main supply when pulled low. This color of that wire is mostly
labeled on the side of the supply - or (as with fortron supplies) it is
the one that is not labeled (green). If you look on top of the ATX
connector as if it was plugged into the board the wire in question is
the 4th from the right hand side on the top row (where there is the
clip) - a look into your mainboard manual might give you a visual idea
since the ATX connector is often depicted there with pins labeled.
</p><p> 
As said if you fire up your supply it would be wise to load it. Check
the label on the supply and load the main +5V and +12 V line to about
15-20% of their max. current capability. - Some automotive bulbs
(headlight, brakelight, etc.) come handy not only for the 12 V but for the
main 5 V line too.  Below about 20% load there is the chance of the supply not
regulating the voltage properly but it should start. 
</p><p>
The 5 V standby line does not need any load - it should read a clean 5 VDC
as soon as the supply is plugged in and the mains power switch is
switched on. 
</p><p>
The main supply should get on-line as soon as the Power_Supply_On wire
gets pulled to ground and the voltages should measure within 5% if
loaded to about 20% of maximum power. 
</p><p>
(From: Sam.)
</p><p>
CAUTION: I have seen one case where an ATX supply actually blew up without
a load using this "hot wire" technique.  I don't know if there was already a
problem with the unit or it really absolutely required a load.  But almost
immediately after grounding the green wire, multiple electrolytic caps on the
secondary side exploded and spilled their guts, one of the MOSFETS shorted,
and <i>then</i> the power fuse blew. :(  It may be that the designers of this
supply in their infinite wisdom assumed that since power is enabled via the
mainboard, there would never be a circumstance where there wouldn't be at
this that as a load!
</p><p>
(From: Tom (w_tom1@usa.net).)
</p><p>
You might try this and try that and.... Well that list is long and still does
not say what is wrong.  You want to identify the problem now, and then
fix it.  In but minutes with a 3.5 digit multimeter, we can identify
the problem AND then replace the suspect.  Do not attach or disconnect
anything.  Changing things may even exponentially complicate the
problem.  That 3.5 digit meter is available for less than $20 in Sears,
Lowes, K-mart, Radio Shack, and Home Depot.  That's the complex part.
</p><p>
With computer plugged into AC receptacle, use meter to measure
voltage on purple wire between power supply and motherboard (connect
probes to purple wire by pushing into nylon connector and other probe
to chassis).  That voltage must be more than 4.87 VDC.  If not, power
supply controller will not tell power supply to power on.  Next measure
voltage on green wire.  It must be more than 2 volts before switch is
pressed and must drop immediately to less than 0.8 volts when switch is
pressed.  This tells power supply to turn on.
</p><p>
Next measure voltage on gray wire.  It must rise to more than 2.4
volts within seconds after power switch is pressed.  Again, you want to
see what happens when switch is pressed - not just long after switch is
pressed.  This signal tells motherboard that power supply is OK.
</p><p>
If gray wire is good or bad, then move on to one red, orange, and
yellow wires.  Measure each as switch is pressed.  Within one second,
each should exceed 3.23, 4.87, or 11.7 volts DC.  If any does not rise,
then find what ever on motherboard or peripherals is excessively
loading that voltage.
</p><p>
Not only do numbers help you to find a the suspect.  Those numbers,
if posted, mean that your replies can include useful information.
Without numbers, then every reply will be only 'try this and try that';
also called shotgunning.  These numbers can also identify an
intermittent failure before that failure occurs.  Useful numbers
obtained in but two minutes means a useful reply; and no shotgunning.
</p><p>
(From: Arthur Jernberg (stubbie45@hotmail.com).)
</p><p>
Here is the pinout for an ATX mainboard:
</p><p>
Left to right: First row voltage; Second row current/color:
</p><ul>
<pre>[+3.3V] [+5V] [+12V] [-12V] [-5V] [+5VSB] [COM] [P-ON] [PG]
 [14A]  [22A]  [9A]   [1A]  [.5A]  [PUR]  [BLK] [GRN]  [GRY]
</pre>
</ul>
<p>
(From: Claudio Lima (claudio.jc.lima@bol.com.br).)
</p><p>
The following procedure is intended for the newer ATX v.2.x power supplies
using a 24 pin connector, as all pinout references were made according to
that standard.
</p><p>
</p><ol>
<li>If you fire up your supply it would be wise to load it.  Check the
 label on the supply and load the main +5 VDC and +12 VDC line to about
 15 to 20% of their maximum current capability, typically:
 2.2 ohms, 15 W: pin 4 (+5 VDC) to pin 7 (GND);
 33 ohms, 5 W: pin 10 (+12VDC) to pin 24 (GND).
<p>
</p></li><li>With power supply plugged into AC receptacle, use meter to measure
 voltage between the purple wire (pin 9  5VSB) and pin 24 (GND).
 That voltage must be more than 4.87 VDC. If not, power supply controller
 will not tell power supply to power on.
<p>
</p></li><li>Next measure voltage on green wire (pin 16, PS_ON).
 It must be more than 2 volts before pulled to ground and must drop
 immediately to less than 0.8 volts when pulled to ground.
 This tells power supply to turn on.
<p>
</p></li><li>Next measure voltage on gray wire (pin 8, PWR_GOOD).
 It must rise to more than 2.4 volts within seconds after PS_ON is pulled to
 ground.  Again, you want to see what happens when PS_ON is pulled to ground
 - not just long after.  This signal tells motherboard that power supply is OK.
<p>
</p></li><li>If gray wire is good or bad, then move on to one orange (pins 1; 2; 12;
 13), red (pins 4; 6; 21; 22; 23), and yellow (pins 10; 11) wires.  Measure
 each as PS_ON is pulled to ground.  Within one second, each should exceed
 3.23, 4.87, or 11.7 VDC.
</li></ol>
<p>
(From: Sam.)
</p><p>
IMPORTANT CAUTION: Apparently, Dell, who has followed industry standards
in most respects, changed the ATX power supply pinout on their PCs
sometime in 1998 and may still be using this proprietary pinout.  See:
<a href="http://www.quepublishing.com/articles/article.asp?p=339053&amp;rl=1">Dell
Proprietary (Non-Standard) ATX Design</a>.  Since there is absolutely no
valid technical reason for doing this, one can only assume it is due to
some, shall we say, shady business decision to prevent people from going
to a third party for upgrades or replacement mainboards or power supplies.
Worse, installing a non-Dell power supply with a Dell mainboard will result
in a destroyed power supply and possible damage to the mainboard.  Thanks
Dell. :(  It's straightforward though not trivial to change the power supply
pinout back to standard (but it isn't a matter of just moving pins around in
the connector since the number of wires for some signals has also changed).
But there should be no need.  Companies should compete by selling a better
product, not a closed system.

</p><h3><a name="smpsppfd">Detailed Procedure for ATX Power Supply Fault Diagnosis</a></h3>

Before blaming the power supply, make sure the outlet is live, the main
power switch (if any) is on, and that any line voltage select switch hasn't
changed position or shifted to an intermediate position accidentally (possibly
when moving the PC).
<p>
(From: Petrus Bitbyter (p.kralt@hccnet.nl).)
</p><p>
I have written a set of notes on repairing ATX power supplies. It follows
below and should contain all you need (and more) to decide whether your power
supply has gone or not.
</p><p>
First of all read the document: <a href="http://www.repairfaq.org/sam/safety.htm">SAFETY</a> and
the general information on SMPS repair elsewhere in this document.
</p><p>
Most of the times the fault is found between the mains connection and the
transformer(s).
</p><p>
</p><ol>
<li>In the most simple cases only the fuse is blown. After replacing
 this fuse, connect the PS to the mains using the series light bulb trick.
<p>
 </p><ul>
 <li>If the bulb burns brightly, you know that the old fuse had a good
  reason to quit, so the case is not simple anymore. The first thing
  you have to do now is to find the short circuit. The most suspected
  components are the mains rectifier, the filter capacitors and one or
  more of the power transistors. Use eyes, nose and an ohmmeter
  to find scene of the crime. Remove and check the suspected
  components. Replace defective components except for the power
  transistors at this time. It makes no sense to continue until you fixed
  the short circuit
<p>
 </p></li><li>If the fuse is good but the PS still dead, you can start to check the
  voltages.
 </li></ul>
<p>
</p></li><li>Check the voltage between pin 3 and pin 9 of the ATX to mainboard
 connector.   This should be +5 VDC.  If not you have to check the voltages
 on the mains side.  Otherwise it will be wise to check the voltages on the
 mains side as well (Steps 3 to 5).  Then continue reading up to Step 12, not
 to miss some explanation.  Continue at Step 12.
<p>
</p></li><li>The AC pins of the mains rectifier should show the mains AC voltage.
 If not you may have an interrupted trace or mains filter.
<p>
</p></li><li>Between plus and minus of this rectifier you should find about +310 VDC
 or +325 VDC depending on your mains voltage. I call it the primary power
 voltage.
<p>
 </p></li><li>If not you may have a faulty mains rectifier.
<p>
 </p></li><li>If the voltage is much lower (analog meter) or jumping around  (digital
  meter), the large filter capacitors (e.g., 470 uF, 200 V) are also
  suspected.
 
<p>
</p></li><li>Both filter capacitors mentioned above are in series. The midpoint
 should be at half the primary power voltage.  If it is not, the mains
 rectifier, the filter capacitors and the parallel resistors (parallel
 to the capacitors) may be defective.  Another suspect is a third capacitor
 (typically 1 uF, 250 V) that leads from the midpoint to a
 transformer.
</li></ol>
<p>
Explanation: ATX PSs usually has three power transistors at the mains side.
One is connected to a small transformer, the other two connected to a larger
transformer. You can recognize the pair of transistors best by finding the
emitter of one of them connected to the collector of the other.
First you have to deal with the one transistor and the small transformer.
(Go to Step 8 if you removed this transistor already.)
</p><p>
</p><ol start="6">
<li>Check the voltage on the collector of the transistor.
<p>
 </p><ul>
 <li>If this voltage is zero or very low there may be an interruption
  between the collector and the primary power voltage.
<p>
 </p></li><li>If this voltage is below the primary power voltage or jumping, there
  seems to be switching activity. You can check this with an AC voltmeter
  on a secondary coil of the transformer. The reading will not be correct,
  but if you find an AC voltage you have to continue checking the
  secondary rectifier and regulator.
<p>
 </p></li><li>If this voltage is the primary power voltage the transistor is not
  conducting (open or not being driven).
 </li></ul>
<p>
</p></li><li>Check the voltage on the base of the transistor.
 If this voltage is less than 0.6 V, the startup resistor may be defective.
 Otherwise, the transistor may be gone (most likely.)
<p>
</p></li><li>Disconnect the PS from the mains and take the safety precautions to
 discharge the capacitors.
<p>
</p></li><li>Remove the suspected transistor and check it with an ohmmeter or a
 transistor checker. Most of the times you will have to provide a new
 transistor. (Beware! Even a transistor that looks good under test conditions
 may malfunction in the actual circuit.)
 This is also the time to remove, check and replace other fried, exploded or
 discolored components near the transistor/transformer combination.
<p>
</p></li><li>Re-power the PS using the series light bulb.
<p>
 </p><ul>
 <li>If the lamp is burning brightly you have a short circuit in your PS.
  Most likely your (new) power transistor is conducting due to too high
  a continuous base current. You have to dive deeper into this part of the
  circuit until you find the cause of this problem.
<p>
 </p></li><li>If the lamp is dim or not burning at all you can re-check the voltage
  between pin 3 and pin 9 of the mainboard connector. Finding +5 VDC, you can
  continue.  Otherwise you have to restart your investigation of the small
  transformer/one power transistor part of the circuit.  (Step 6.) It makes
  no sense to continue until this part of the PS functions correctly.
 </li></ul>
<p>
</p></li><li>Disconnect the PS from the mains when you are done so far.
</li></ol>
<p>
Explanation: For the next part of the repair procedure you have to provide
some load to the PS. This is simply because of some PSs will not function
well without load. You may use an (old) main board. Someone ever told me he
uses 12 V car bulbs, one on the +5 VDC and another on the +12 VDC outputs. I
prefer a huge and heavy old harddrive. Those old basalt blocks (we use to
strengthen our dikes) consume a lot of energy. The one I use, provided
enough load for all the PSs I ever repaired.
</p><p>
</p><ol start="12">
<li>Replace the power transistors you may have removed earlier.
 Reconnect the PS to the mains using the series light bulb. Check the
 voltage between pin 3 and pin 9 of the main board connector. Connect pin 14
 of the main board connector to pin 13. This will switch on the main part of
 the PS, the part with the two power transistors and the large transformer.
<p>
 </p><ul>
 <li>If your loads start to work, check the voltages of the several power
  connectors. When they have the correct values your PS is on air again.
  Check it out by removing the series light bulb.
<p>
 </p></li><li>If (even after removing the series light bulb) some but not all of the
  values are correct, you have a problem. You have to investigate the
  failing voltages from the secondary coil of the transformer till the
  connector. Quite a challenge.
<p>
 </p></li><li>If the light bulb is burning brightly you have a short circuit. Most
  likely your power transistors are gone so you have to check (and almost
  sure replace) them and their surrounding components, especially the start
  resistors.  Pay special attention to the freewheel diodes (between
  the collector and the emitter of the power transistors.) Don't forget to
  disconnect  the PS and to discharge the filter capacitors first! When you
  are done, restart at Step 12.
<p>
 </p></li><li>If your lamp is dim or dark but your load does not work you may have
  defective or blocking power transistors. A fault on the secondary side of
  the transformer is another possibility.
 </li></ul>
<p>
</p></li><li>Search for switching activity on the secondary coils of the transformer
using an AC meter.
<p>
 </p><ul>
 <li>If you don't find AC voltage you have to check the voltages on the
  power transistors.
<p>
 </p></li><li>If you find an AC voltage you most likely have a defective rectifier,
  filter capacitor or regulator at the secondary side. Disconnect from the
  mains, discharge the  filter capacitors and try to find the failing
  components with an ohmmeter. You will have to remove the rectifiers
  from the board prior to testing because of the secondary coils have
  only few windings of thick wire so they are the shortest shortcuts as
  far as your ohmmeter concerns. Another trick is to use a controllable
  power supply. Connect it to the point where the removed rectifier was
  connected to its filter capacitor. Beware of the polarity! Power on both
  PSs and increase the voltage of your controllable PS to the level of normal
  operating of your defective PS. The regulator that sucks to much current
  with respect to the light load will be the main suspect.
  You have to go deeper into the circuit of this regulator if you want to
  repair it. Another challenge.
 </li></ul>
<p>
</p></li><li>Check the voltages on the power transistors. The collector of one of
 them should be at the primary power voltage, the emitter of the other
 should be at the common. The remaining collector and emitter are tied
 together and should be at half the primary power voltage.
<p>
 </p><ul>
 <li>If you can't find the primary power voltage at a collector you have an
  interruption. Maybe a bad soldering or the like.
<p>
 </p></li><li>If no emitter is connected to common you also have an interruption.
<p>
 </p></li><li>If the tied collector-emitter is not at half the primary power voltage
  you most likely have defective power transistors. (In my experience they
  always die together.)  Disconnect, discharge and remove, check and
  replace the power transistors and their surrounding components. Restart
  at Step 12.
<p>
 </p></li><li>If the tied collector-emitter is at half the primary power voltage you
  can check the base-emitter voltage of the power transistors. If they are
  less than 0.6 V you may be lucky and find only defective start resistor(s)
  and/or other base circuit components. But most of the times a defective base
  circuit will kill its transistor which in turn will kill its neighbor.
  So you will have to replace them all.
 </li></ul>
</li></ol>
<p>
Of course, this story does not cover all possible faults of PC-power
supplies, but I only once failed to repair a PS using this scheme.

</p><h3><a name="smpswars">War stories - the Boschert 2-stage SMPSU</a></h3>

(From: Tony Duell (ard@p850ug1.demon.co.ku).)
<p>
In case you have been lucky enough not to have come across the beast, the
basic idea is:
</p><p>
</p><ol>
<li>Rectify/smooth mains, giving 340V DC.
<p>
</p></li><li>Put that into a non-isolated step-down switching converter using a fat
 power transistor, a freewheel diode and an inductor. The control IC for
 this is a 723 (!) with feedback applied via an optocoupler from the
 secondary side. Oh, and there's a current-limit shutdown from a 0R15
 resistor in series with the 'load' (section 3, etc). The output of this
 stage is about 150V
<p>
</p></li><li>The output of that feeds a pair of transistors that run as a free-running
 push/pull oscillator. That drives the primary of the main chopper
 transformer (which provides isolation from the mains).
<p>
</p></li><li>The secondaries of that transformer are rectified to provide output
 voltages. There's a feedback to (2) as described, and also a crowbar.
</li></ol>
<p>
Now for the failure mode (seen it happen):
</p><p>
</p><ol>
<li>The first chopper goes short-circuit because it feels like it. The 150 VDC
 line jumps to 340 VDC (remember, no isolation, and the inductor/transistor are
 in series from the 340 VDC line to the 150V line).
<p>
</p></li><li>The crowbar fires, shorting the output. The primary-side current goes up as
 well.
<p>
</p></li><li>The overcurrent trip operates, and the 723 tries to shut down. It removes
 the drive from the *first* chopper. But that's shorted, so removing the
 drive doesn't do a darn thing.
<p>
</p></li><li>The 2 transistors in the push/pull circuit short as well.
<p>
</p></li><li>Rectified mains is now connected acros : 3 shorted transistors, a few
 small windings (oscillator feedback transformer, inductor, etc), and the
 0R15 resistor. The latter explodes.
<p>
</p></li><li>340 VDC is now applied across the connections of the ex-0R15 resistor.
 A few small transistors and the 723 expire, along with some PCB tracks.
<p>
</p></li><li>The fuse (10 A, FF blow) fails.
</li></ol>
<p>
Repairing that was an entertainment. I still have my photocopy of the
schematic with all the dud components circled!

</p><h3><a name="smpscslvt">Capacitors, startup, and low voltage testing</a></h3>

(From: Kevin Beeden (kevin.beeden@rrl.co.uk).)
<p>
I was fighting with a Hitachi PSU (SP-13A unit from UK VT-F860E VCR).
</p><p>
Symptoms: Following line power disconnect, wouldn't start up.  Traced circuit,
found broken Tr in LV side, replaced, no good.  No gate drive.  Trouble
figuring gate drive cct.  Applied 30 VDC to HV side and drove gate from 10 kHz
signal generator (5 V squarewave via 1K resistor).  The MOSFET switcher was
okay, output active but won't start.  Startup drive is via a 1 uF, 250 V cap.
Can't see any drive on gate when power applied from cold.  Read these notes.
Doh! Capacitor gone open circuit.  Replace cap and now get gate drive until
output settles.
</p><p>
I was happily surprised to find that the circuit worked off of 30 VDC, as I'm
not keen on debugging live mains or 400 VDC! This may be a top tip for fellow
debuggers.  I simply connected 30 VDC to the post-rectification smoothing cap,
hit the gate with the signal generator, and away it went.  Note: this is
under no load conditions; the PSU was removed from the VCR.
</p><p>
I also found a devious little component masquerading as a resistor.  It
appears to actually be back-to-back (Schottky? 1V3) diodes and a 220 ohm
resistor in some series or parallel arrangement.  Marked externally as 220R,
identical appearance to other resistors.

</p><h3><a name="smpswfsb">Why is the main fuse rating so big?</a></h3>

On a typical SMPS (or piece of equipment like a TV, monitor, or VCR using an
SMPS), the nameplate current rating may be much much smaller than
the fuse rating (or equivalently, the nameplate power rating may imply a
much smaller current).  Why is this the case?
<p>
There are actually many reasons for the fuse to be much larger than the
maximum current specified on the nameplate.  Some of these include:
</p><p>
</p><ol>
<li>The peak current during power on is actually much higher due to the degauss
 coil and charging of the SMPS caps.
<p>
</p></li><li>?The power factor is much smaller than unity for a typical SMPS and this
 increase the average current - which is what the fuse sees.
<p>
</p></li><li>The fuse for the SMPS is really there to protect against catastrophic
 failure so it can be much larger than the average expected current.  If that
 fuse blows, it's usually the result of the failure of the main chopper
 transistor, not a slight overload (for which the SMPS should shut down).
</li></ol>
<p>
Replacing the fuse with a smaller one really won't make the equipment any
safer but may result in nuisance blowing.
</p><p>
<a name="smpssrv"></a>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<h2>Service Information</h2>
<h3><a name="smpsadvt">Advanced troubleshooting</a></h3>

If the solutions to your problems have not been covered in this document,
you still have some options other than replacement.
<p>
(Also see the related document: <a href="http://www.repairfaq.org/sam/tshoot.htm">Troubleshooting and
Repair of Consumer Electronic Equipment</a>.
</p><p>
Manufacturer's service literature:  Service manuals may be available
for for your equipment.  Once you have exhausted other obvious possibilities,
the cost may be well worth it.  Depending on the type of equipment, these
can range in price from $5-100 or more.  Sometimes, these may even be free
(yes, even in this day and age where you have to pay for free air at your
local gas station!)  Some are more useful than others.  However, not all
include the schematics so if you are hoping to repair an electronic problem
try to check before buying.
</p><p>
Inside cover of the equipment:  TVs often have some kind of circuit
diagram pasted inside the back cover.  In the old days, this was
a complete schematic.  Now, if one exists at all for a monitor, it just
shows part numbers and location for key components - still very useful.
</p><p>
Sams Photofacts:  These have been published for over 45 years mostly
for TVs and radios.  There are some for VCRs and a few for some early
PC monitors and other pre-Jurassic computers.  However, for the power
supplies in TVs, there will nearly always be a Sams with complete
schematics.
</p><p>
Whatever the ultimate outcome, you will have learned a great deal.
Have fun - don't think of this as a chore.  Electronic troubleshooting 
represents a detective's challenge of the type hat Sherlock Holmes
could not have resisted.  You at least have the advantage that the
electronics do not lie or attempt to deceive you (though you may
beg to differ at times).  So, what are you waiting for?

</p><h3><a name="smpssidol">SMPS info and datasheets on-line</a></h3>

Many companies now have very extensive information available via the
World Wide Web.  Here are a few company sites:
<p>
</p><ul>
<li><a href="http://www.irf.com/">International Rectifier</a>
</li><li><a href="http://www.lambda.com/to/main.html">Lambda Semiconductors</a>
</li><li><a href="http://www.maxim-ic.com/">Maxim Integrated Products</a>
</li><li><a href="http://www.st.com/">SGS-Thomson</a>
</li><li><a href="http://www.uicc.com/">Unitrode Corporation</a>
</li></ul>
<p>
The following site has a variety of information and links to SMPS related
sites:
</p><p>
</p><ul>
<li><a href="http://www.smpstech.com/">SMPS Design by Jerrold Foutz</a>.
</li></ul>

<h3><a name="smpsrefst">References on SMPS technology and troubleshooting</a></h3>

There is a nice detailed article on PC power supply repair from Nuts and Volts
Magazine on-line at: <a href="http://www.nutsvolts.com/PDF_Files/PSRepair.pdf">PC Power
Supply Repair by T. J. Byers</a>.  This is probably a good place to start if you are
specifically interested in the common PC power supply.  It looks like this article
is pre-ATX but most of the information still applies.
<p>
<a href="http://www.smpspowersupply.com/">SMPSPowerSupply.com</a> has
extensive information including a great deal on PC power supplies including
explanations of how they work, schematics, standards, and more.
</p><p>
Also see the document:
<a href="http://www.repairfaq.org/REPAIR/F_SwitcherPS.html">PC Switchmode
Power Supplies</a>.
</p><p>
Texas Instruments has an application note which is sort of the "short"
version of SMPS repair.  See: 
<a href="http://www-s.ti.com/sc/psheets/slva085/slva085.pdf">Off-Line SMPS
Failure Modes PWM Switchers and DC-DC Converters</a>.
</p><p>
Here are some suggested books with information relating to SMPS and DC-DC
converter design, testing, troubleshooting, repair, etc.:
</p><p>
</p><ol>
<li>Power Supplies, Switching Regulators, Inverters &amp; Converters, 2nd Edition.<br>
 Irving Gottleib<br>
 TAB Books, 1994<br>
 ISBN 0-8306-4404-0
<p>
</p></li><li>Modern DC-to-DC Switchmode Power Converter Circuit<br>
 Rudolf P. Severns and Gordon E. Bloom<br>
 Van Nostrand Reinhold<br>
 ISBN 0-442-21396-4
<p>
</p></li><li>Principles of Solid State Power Conversion<br>
 Ralph E. Tarter<br>
 Howard W. Sams &amp; Co., Inc.<br>
 ISBN 0-672-22018-0
<p>
</p></li><li>Advances in Switched-Mode Power Conversion<br>
 R.D. Middlebrook &amp; Slobodan Cuk<br>
 Contact: TeslaCo, Pasadena, CA 91107 (last known address)
<p>
</p></li><li>Simplified Design of Switching Power Supplies<br>
 John D. Lenk<br>
 Butterworth-Heinemann<br>
 ISBN 0-7506-9821-7.
<p>
</p></li><li>Power Electronics, 2nd ed.<br>
 B.W. Williams<br>
 McGraw-Hill, 1992<br>
 ISBN 0-07-070439-2
<p>
</p></li><li>Switching Power Supply Design<br>
 Abraham Pressman, Second Edition<br>
 McGraw-Hill, 1998<br>
 ISBN 0-07-052236-7.<br>
 ISBN 0-07-050806-2 (First Edition, 1991).
<p>
</p></li><li>Switch Mode Power Conversion<br>
 K. Kit Sum
<p>
</p></li><li>Switchmode Power Supply Handbook<br>
 Keith Billings<br>
 McGraw-Hill, 1989<br>
 ISBN 0-07-005330-8
<p>
</p></li><li>Power Supply Cookbook<br>
 Marty Brown<br>
 ISBN 0-7506-9442-4
<p>
</p></li><li>Transformer and Inductor Design Handbook<br>
 Colonel Wm. T. McLyman (yes, his 1st name is "Colonel" - not military)<br>
 Marcel Dekker, Inc.<br>
 ISBN 0-8247-6801-9
<p>
</p></li><li>Magnetic Core Selection for Transformers &amp; Inductors<br>
 Colonel Wm. T. McLyman<br>
 Marcel Dekker, Inc.<br>
 ISBN 0-8247-1873-9
<p>
</p></li><li>Magnetic Components, Design and Applications<br>
 Steve Smith<br>
 ISBN 0-442-20397-7.
<p>
</p></li><li>Soft Ferrites, 2nd ed.<br>
 E.C. Snelling<br>
 Butterworth, 1988<br>
 ISBN 0-408-02760-6
<p>
</p></li><li>High Frequency Switching Power Supplies, Theory and Design<br>
 George Chryssis<br>
 McGraw-Hill Co., 1984
<p>
</p></li><li>Switched Mode Power Supplies - Design and Construction<br>
 Whittington, Flynn and Macpherson published<br>
 Research Studies Press, Ltd.<br>
 ISBN 0-863-80203-6
</li></ol>
<p>
In addition, many smeiconductor manufacturers publish extensive information
on switchmode technology.  Mostly, this is in connection with their product
lines but will also contain a lot of general information.  Much of this is
available on Internet via the World Wide Web.  Companies include: Maxim,
Linear Technology, and Unitrode.
</p><p>
(From: OneStone (OneStone@bigpond.com).)
</p><blockquote>
<p>
"Try the <a href="http://www.linear.com/">Linear Technologies Website</a>.
</p><p>
 Look for their App notes:
</p><p>
</p><ul>
<li>AN25 Switching regulators for Poets.
</li><li>AN19 LT1070 Design manual
</li><li>AN29 Some thoughts on DC-DC converters
</li><li>AN30 Switching regulator circuit collection.
</li><li>AN31 Linear Circuits for digital systems.
</li></ul>
<p>
Then try one of their new data sheets, such as the LT1370, for some modern
circuit configurations, such as SEPIC converters. The above APP notes are all
contained in their Linear Applications handbook, Volume 1, 1990. If you are a
designer they also have a CD-ROM available, which includes some switcher and
filter design software. It's a bit limited, but a great starting point if you
don't need to stretch the boundaries."
</p></blockquote>
<p>
For diagnosing power problems in TVs and Computer or Video monitors,
here is one book that includes many illustrations and case histories.
</p><p>
</p><ol start="17">
<li> Troubleshooting and Repairing Solid State TVs<br>
 Homer L. Davidson<br>
 2nd Edition, 1992<br>
 TAB Books, Inc.<br>
 Blue Ridge Summit, PA 17214
</li></ol>
<p>
(From: Ernst C. Land, Jr. (a6mech@ionet.net) 
       and Mark Zenier (mzenier@eskimo.com or mzenier@netcom.com).)
</p><p>
The September 1996 (VOL. 17 NO. 9) issue of Nuts &amp; Volts Magazine has a great
article on theory, troubleshooting, and repair of PC power supplies.  Their
web site is: http://www.nutsvolts.com/.
</p><p>
When you get there, click on [more], then [back issues]

</p><h3><a name="smpsparts">Parts information</a></h3>

I have found one of the most useful single sources for general
information on semiconductors to be the ECG Semiconductors Master
Replacement Guide, about $6 from your local Philips distributor.
STK, NTE, and others have similar manuals.  The ECG manual will
enable you to look up U.S., foreign, and manufacturer 'house' numbers
and identify device type, pinout, and other information.  Note that
I am not necessarily recommending using ECG (or other generic) replacements
if the original replacements are (1) readily available and (2) reasonably
priced.  However, the cross reference can save countless hours searching
through databooks or contacting the manufacturers.  Even if you have
a wall of databooks, this source is invaluable.  A couple of caveats:
(1) ECG crosses have been known to be incorrect - the specifications
of the ECG replacement part were inferior to the original. (2) Don't
assume that the specifications provided for the ECG part are identical
to the original - they may be better in some ways.  Thus, using the ECG
to determine the specifications of the parts in your junk bin can be
risky.
<p>
Other cross reference guides are available from the parts source listed below.

</p><h3><a name="smpsisoti">Information sources on the Internet</a></h3>

Many manufacturers are now providing extensive information via the
World Wide Web.  The answer to you question may be a mouse click
away.  Perform a net search or just try to guess the manufacturer's
home page address.  The most obvious is often correct.  It will usually
be of the form "http://www.xxx.com" where xxx is the manufacturers' name,
abbreviation, or acronym.  For example, Hewlett Packard is hp, Sun
Microsystems is sun, Western Digital Corp. is wdc.  NEC is, you
guessed it, nec.  It is amazing what is appearing freely accessible via
the WWW.  For example, monitor manufacturers often have complete information
including detailed specifications for all current and older products.
Electronic parts manufacturers often have detailed datasheets and application
notes for their product offerings.

<h3><a name="smpsitcgoc">Interchangeability of components</a></h3>

The question often arises: If I cannot obtain an exact replacement or
if I have a monitor, TV, or other equipment carcass gathering dust, can I
substitute a part that is not a precise match?  Sometimes, this is simply
desired to confirm a diagnosis and avoid the risk of ordering an expensive
replacement and/or having to wait until it arrives.
<p>
For safety related items, the answer is generally NO - an exact replacement
part is needed to maintain the specifications within acceptable limits with
respect to line isolation, X-ray protection and to minimize fire hazards.
Typical parts of this type include flameproof resistors, some types of
capacitors, and specific parts dealing with CRT high voltage regulation.
However, during testing, it is usually acceptable to substitute electrically
equivalent parts on a temporary basis.  For example, an ordinary 1 ohm
resistor can be substituted for an open 1 ohm flameproof resistor to determine
if there are other problems in the the SMPS chopper before placing an order
as long as you don't get lazy and neglect to install the proper type before
considering the repair complete.
</p><p>
For other components, whether a not quite identical substitute will work
reliably or at all depends on many factors.  Some deflection circuits are
so carefully matched to a specific horizontal output transistor that no
substitute will be reliable.
</p><p>
Here are some guidelines:
</p><p>
</p><ol>
<li>Fuses - same type (usually normal or fast blow), exact same current rating
 and at least equal voltage rating.  I have often soldered a normal 3AG size
 fuse onto a smaller blown 20 mm long fuse as a substitute.
<p>
</p></li><li>Resistors, capacitors, inductors, diodes, switches, potentiometers,
 LEDs, and other common parts - except for those specifically marked as
 safety-critical - substitution as long as the replacement part fits
 and specifications should be fine.  It is best to use the same type - metal
 film resistor, for example.  But for testing, even this is not a hard
 and fast rule and a carbon resistor should work just fine.
<p>
</p></li><li>Rectifiers - many of these are high efficiency and/or fast recovery
 types.  Replacements should have equal or better PRV, Imax, and Tr
 specifications.  However, the AC input bridge can usually be replaced
 with anything with at least equal voltage and current ratings.
<p>
</p></li><li>Main filter capacitor(s) - use replacements with at least equal working
 voltage and similar uF rating.  For testing, even something with half
 the capacity will be fine.  For the final replacement bigger is not
 always better and even using a smaller one (uF) will be fine as long
 as you are not running the supply near full load capacity.  Use
 of a higher temperature rated capacitor than the original may be
 desirable as its life may have been shorteded by a hot environment.
 This practice will never hurt.
<p>
</p></li><li>Transistors and thyristors (except SMPS choppers or HOTs) - substitutes
 will generally work as long as their specifications meet or exceed those
 of the original.  For testing, it is usually OK to use types that do not
 quite meet all of these as long as the breakdown voltage and maximum
 current specifications are not exceeded.  However, performance (like
 regulation specifications) may not be quite as good.  For power types,
 make sure to use a heatsink.
<p>
</p></li><li>SMPS chopper (or horizontal output) transistors - exact replacement is
 generally best but except for very high performance monitors, generic HOTs
 that have specifications that are at least as good will work in many cases.
 Make sure the replacement transistor has an internal damper diode if
 the original had one.  For testing with a series light bulb, even a
 transistor that doesn't quite meet specifications should work well
 enough (and not blow up) to enable you to determine what else may be
 faulty.  The most critical parameters are Vceo/Vcbo, Ic, and Hfe which
 should all be at least equal to the original transistor.  I have often
 used by favorite BU208D as a temporary substitute for other HOTs and SMPS
 (chopper) transistors.  Make sure you use a heatsink (with insulating
 washer if applicable) and thermal grease in any case - even if you have
 to hang the assembly with a cable-tie to make it fit.
<p>
 Also see the section: <a href="#smpsreppt">Replacement power transistors
 while testing</a>.
</p></li></ol>
<p>
The following are usually custom parts and substitution of something from
your junk box is unlikely to be successful even for testing: flyback (LOPT)
and SMPS transformers, interstage coils or transformers, microcontrollers,
and other custom programmed chips.
</p><p>
Substituting entire circuit boards and other modules from identical models
is, of course, possible and an excellent troubleshooting aid even if it is
only used to confirm or identify a bad part.  However, if the original
failure was catastrophic, you do run some risk of damaging components
on the substitute circuit board as well.

</p><h3><a name="smpsreppt">Replacement power transistors while testing</a></h3>

During testing of horizontal deflection circuits or switchmode power supplies,
particularly where the original failure resulted in the death of the HOT or
chopper, overstress on replacement transistors is always a possibility if all
defective components have not be identified.
<p>
Therefore, using a part with better specifications may save you in the long
run by reducing the number of expensive blown parts.  Once all other problems
have been located and repaired, the proper part can be installed.
</p><p>
However, this is not always going to work.  In a TV and especially a high
performance monitor, the HOT may be closely matched to the drive and output
components of the deflection circuits.  Putting in one with higher Vce, I,
or P specifications may result in overheating and failure due to lower Hfe.
</p><p>
Where possible, a series load like a light bulb can be used limit the maximum
current to the device and will allow you to power the equipment while checking
for other faults.  Some designs, unfortunately, will not start up under these
conditions.  In such cases, substituting a 'better' device may be the best
choice for testing.
</p><p>
(From: Glenn Allen (glenn@manawatu.gen.nz).)
</p><p>
I been repairing SMPS of all types but when I started on those using MOSFETs
I was blowning a few of them when replaced because something else was faulty.
</p><p>
Ever since I have been using a BUZ355 on a heat sink I haven't blown it.  It
is rated at 800 V, 6 A, and 220 W. it is a TO218 case bigger than a T0220.
It seems the higher ratings allows you to do repair where as a something like 
a 2SK1117 or MTP6N60 will just blow.

</p><h3><a name="smpstorct">Testing of replacement chopper transistors</a></h3>

The following is useful both to confirm that a substitute replacement chopper
transistor is suitable and that no other circuit problems are still present.
However, this will not catch single shot events that may blow the transistor
instantly without any increase in temperature.
<p>
It was written with TV and monitor horizontal output transistors in mind but
applies to the switchmode/chopper transistors found in line powered SMPSs as
well.
</p><p>
(From: Raymond Carlsen (rrcc@u.washington.edu).)
</p><p>
After installing a replacement HOT in a TV set or monitor, I like to check the
temperature for awhile to make sure the substitute is a good match and that
there are no other problems such as a weak H drive signal. The input current
is just not a good enough indicator.  I have been using a WCF (well calibrated
finger) for years. For me, the rule of thumb, quite literally, is: if you can
not hold your finger on it, it's running too hot, and will probably fail
prematurely. Touching the case of the transistor or heat sink is tricky....
</p><p>
Metal case transistors will be connected to the collector and have a healthy
pulse (&gt;1,200 V peak!) and even with plastic case tab transistors, the tab will
be at this potential.  It is best to do this only after the power is off and
the B+ has discharged.  In addition, the HOT may be hot enough to burn you. 
</p><p>
A better method is the use of an indoor/outdoor thermometer. I bought one
recently from Radio Shack for about $15 (63-1009). It has a plastic 'probe' on
the end of a 10' cable as the outdoor sensor. With a large alligator clip, I
just clamp the sensor to the heat sink near the transistor and set up the
digital display near the TV set to monitor the temperature. The last TV I used
it on was a 27" Sanyo that had a shorted H.  output and an open B+ resistor.
Replacement parts brought the set back to life and the flyback pulse looked
OK, but the transistor was getting hot within 5 minutes... up to 130 degrees
before I shut it down and started looking for the cause. I found a 1 uF 160
volt cap in the driver circuit that was open. After replacing the cap, I
fired up the set again and monitored the heat sink as before. This time, the
temperature slowly rose to about 115 degrees and stayed there. I ran the set
all day and noticed little variation in the measurement. Test equipment doesn't
have to cost a fortune. 

</p><h3><a name="smpsreppsrc">Repair parts sources</a></h3>

For general electronic components like resistors and capacitors, most
electronics distributors will have a sufficient variety at reasonable
cost.  Even Radio Shack can be considered in a pinch.
<p>
However, for modern electronic equipment repairs, places like Digikey,
Allied, and Newark do not have the a variety of Japanese semiconductors
like ICs and transistors or any components like flyback transformers or
degauss Posistors.
</p><p>
See the document: <a href="http://www.repairfaq.org/sam/srvcprts.htm">Major Service Parts Suppliers</a> for
some companies that I have used in the past and others that have been
recommended.
</p><p>
In addition, specifically for VCR SMPS repair:
</p><p>
</p><ul>
<li>Studio Sound Service<br>
 Fax: 1-812-949-7743<br>
 Email: studio.sound@datacom.iglou.com.
<p>
 Rebuild kits for many popular VCR switchmode power supplies, VCR parts, some
 components.  They will be happy to identify specific VCR part numbers as well
 based on model and description as well.
</p><p>
</p><hr>
<br>
</li><li>Back to <a href="#smpstoc">SMPS Repair FAQ Table of Contents</a>.
<p>
-- end V2.86 --
</p><p>


</p></li></ul></li></body></html>